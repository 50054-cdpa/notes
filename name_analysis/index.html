
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Notes for SUTD's CDPA 50.054" name="description"/>
<meta content="Kenny Lu" name="author"/>
<link href="../static_semantics_2/" rel="prev"/>
<link href="../sign_analysis_lattice/" rel="next"/>
<link href="../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.5.3, mkdocs-material-9.5.17" name="generator"/>
<title>Name Analysis - Compiler Design and Program Analysis 50.054</title>
<link href="../assets/stylesheets/main.bcfcd587.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<style>:root{--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.5 1.75v11.5c0 .138.112.25.25.25h3.17a.75.75 0 0 1 0 1.5H2.75A1.75 1.75 0 0 1 1 13.25V1.75C1 .784 1.784 0 2.75 0h8.5C12.216 0 13 .784 13 1.75v7.736a.75.75 0 0 1-1.5 0V1.75a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25Zm13.274 9.537v-.001l-4.557 4.45a.75.75 0 0 1-1.055-.008l-1.943-1.95a.75.75 0 0 1 1.062-1.058l1.419 1.425 4.026-3.932a.75.75 0 1 1 1.048 1.074ZM4.75 4h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM4 7.75A.75.75 0 0 1 4.75 7h2a.75.75 0 0 1 0 1.5h-2A.75.75 0 0 1 4 7.75Z"/></svg>');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4.72.22a.75.75 0 0 1 1.06 0l1 .999a3.488 3.488 0 0 1 2.441 0l.999-1a.748.748 0 0 1 1.265.332.75.75 0 0 1-.205.729l-.775.776c.616.63.995 1.493.995 2.444v.327c0 .1-.009.197-.025.292.408.14.764.392 1.029.722l1.968-.787a.75.75 0 0 1 .556 1.392L13 7.258V9h2.25a.75.75 0 0 1 0 1.5H13v.5c0 .409-.049.806-.141 1.186l2.17.868a.75.75 0 0 1-.557 1.392l-2.184-.873A4.997 4.997 0 0 1 8 16a4.997 4.997 0 0 1-4.288-2.427l-2.183.873a.75.75 0 0 1-.558-1.392l2.17-.868A5.036 5.036 0 0 1 3 11v-.5H.75a.75.75 0 0 1 0-1.5H3V7.258L.971 6.446a.75.75 0 0 1 .558-1.392l1.967.787c.265-.33.62-.583 1.03-.722a1.677 1.677 0 0 1-.026-.292V4.5c0-.951.38-1.814.995-2.444L4.72 1.28a.75.75 0 0 1 0-1.06Zm.53 6.28a.75.75 0 0 0-.75.75V11a3.5 3.5 0 1 0 7 0V7.25a.75.75 0 0 0-.75-.75ZM6.173 5h3.654A.172.172 0 0 0 10 4.827V4.5a2 2 0 1 0-4 0v.327c0 .096.077.173.173.173Z"/></svg>');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M9.504.43a1.516 1.516 0 0 1 2.437 1.713L10.415 5.5h2.123c1.57 0 2.346 1.909 1.22 3.004l-7.34 7.142a1.249 1.249 0 0 1-.871.354h-.302a1.25 1.25 0 0 1-1.157-1.723L5.633 10.5H3.462c-1.57 0-2.346-1.909-1.22-3.004L9.503.429Zm1.047 1.074L3.286 8.571A.25.25 0 0 0 3.462 9H6.75a.75.75 0 0 1 .694 1.034l-1.713 4.188 6.982-6.793A.25.25 0 0 0 12.538 7H9.25a.75.75 0 0 1-.683-1.06l2.008-4.418.003-.006a.036.036 0 0 0-.004-.009l-.006-.006-.008-.001c-.003 0-.006.002-.009.004Z"/></svg>');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M5 5.782V2.5h-.25a.75.75 0 0 1 0-1.5h6.5a.75.75 0 0 1 0 1.5H11v3.282l3.666 5.76C15.619 13.04 14.543 15 12.767 15H3.233c-1.776 0-2.852-1.96-1.899-3.458Zm-2.4 6.565a.75.75 0 0 0 .633 1.153h9.534a.75.75 0 0 0 .633-1.153L12.225 10.5h-8.45ZM9.5 2.5h-3V6c0 .143-.04.283-.117.403L4.73 9h6.54L9.617 6.403A.746.746 0 0 1 9.5 6Z"/></svg>');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.344 2.343h-.001a8 8 0 0 1 11.314 11.314A8.002 8.002 0 0 1 .234 10.089a8 8 0 0 1 2.11-7.746Zm1.06 10.253a6.5 6.5 0 1 0 9.108-9.275 6.5 6.5 0 0 0-9.108 9.275ZM6.03 4.97 8 6.94l1.97-1.97a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l1.97 1.97a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-1.97 1.97a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L6.94 8 4.97 6.03a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018Z"/></svg>');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"/></svg>');--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.752 1.752 0 0 1 1 7.775Zm1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25ZM6 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z"/></svg>');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"/></svg>');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M3.499.75a.75.75 0 0 1 1.5 0v.996C5.9 2.903 6.793 3.65 7.662 4.376l.24.202c-.036-.694.055-1.422.426-2.163C9.1.873 10.794-.045 12.622.26 14.408.558 16 1.94 16 4.25c0 1.278-.954 2.575-2.44 2.734l.146.508.065.22c.203.701.412 1.455.476 2.226.142 1.707-.4 3.03-1.487 3.898C11.714 14.671 10.27 15 8.75 15h-6a.75.75 0 0 1 0-1.5h1.376a4.484 4.484 0 0 1-.563-1.191 3.835 3.835 0 0 1-.05-2.063 4.647 4.647 0 0 1-2.025-.293.75.75 0 0 1 .525-1.406c1.357.507 2.376-.006 2.698-.318l.009-.01a.747.747 0 0 1 1.06 0 .748.748 0 0 1-.012 1.074c-.912.92-.992 1.835-.768 2.586.221.74.745 1.337 1.196 1.621H8.75c1.343 0 2.398-.296 3.074-.836.635-.507 1.036-1.31.928-2.602-.05-.603-.216-1.224-.422-1.93l-.064-.221c-.12-.407-.246-.84-.353-1.29a2.425 2.425 0 0 1-.507-.441 3.075 3.075 0 0 1-.633-1.248.75.75 0 0 1 1.455-.364c.046.185.144.436.31.627.146.168.353.305.712.305.738 0 1.25-.615 1.25-1.25 0-1.47-.95-2.315-2.123-2.51-1.172-.196-2.227.387-2.706 1.345-.46.92-.27 1.774.019 3.062l.042.19a.884.884 0 0 1 .01.05c.348.443.666.949.94 1.553a.75.75 0 1 1-1.365.62c-.553-1.217-1.32-1.94-2.3-2.768L6.7 5.527c-.814-.68-1.75-1.462-2.692-2.619a3.737 3.737 0 0 0-1.023.88c-.406.495-.663 1.036-.722 1.508.116.122.306.21.591.239.388.038.797-.06 1.032-.19a.75.75 0 0 1 .728 1.31c-.515.287-1.23.439-1.906.373-.682-.067-1.473-.38-1.879-1.193L.75 5.677V5.5c0-.984.48-1.94 1.077-2.664.46-.559 1.05-1.055 1.673-1.353V.75Z"/></svg>');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.92 6.085h.001a.749.749 0 1 1-1.342-.67c.169-.339.436-.701.849-.977C6.845 4.16 7.369 4 8 4a2.756 2.756 0 0 1 1.637.525c.503.377.863.965.863 1.725 0 .448-.115.83-.329 1.15-.205.307-.47.513-.692.662-.109.072-.22.138-.313.195l-.006.004a6.24 6.24 0 0 0-.26.16.952.952 0 0 0-.276.245.75.75 0 0 1-1.248-.832c.184-.264.42-.489.692-.661.103-.067.207-.132.313-.195l.007-.004c.1-.061.182-.11.258-.161a.969.969 0 0 0 .277-.245C8.96 6.514 9 6.427 9 6.25a.612.612 0 0 0-.262-.525A1.27 1.27 0 0 0 8 5.5c-.369 0-.595.09-.74.187a1.01 1.01 0 0 0-.34.398ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg>');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1.75 2.5h10.5a.75.75 0 0 1 0 1.5H1.75a.75.75 0 0 1 0-1.5Zm4 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5Zm0 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5ZM2.5 7.75v6a.75.75 0 0 1-1.5 0v-6a.75.75 0 0 1 1.5 0Z"/></svg>');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg>');}</style>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CSpline+Sans+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Spline Sans Mono"}</style>
<script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#50054-name-analysis">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Compiler Design and Program Analysis 50.054" class="md-header__button md-logo" data-md-component="logo" href=".." title="Compiler Design and Program Analysis 50.054">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 3a2 2 0 0 1 2-2h9.982a2 2 0 0 1 1.414.586l4.018 4.018A2 2 0 0 1 21 7.018V21a2 2 0 0 1-2 2H4.75a.75.75 0 0 1 0-1.5H19a.5.5 0 0 0 .5-.5V8.5h-4a2 2 0 0 1-2-2v-4H5a.5.5 0 0 0-.5.5v6.25a.75.75 0 0 1-1.5 0Zm12-.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 0-.146-.336l-4.018-4.018A.5.5 0 0 0 15 2.5Z"></path><path d="M4.53 12.24a.75.75 0 0 1-.039 1.06l-2.639 2.45 2.64 2.45a.75.75 0 1 1-1.022 1.1l-3.23-3a.75.75 0 0 1 0-1.1l3.23-3a.75.75 0 0 1 1.06.04Zm3.979 1.06a.75.75 0 1 1 1.02-1.1l3.231 3a.75.75 0 0 1 0 1.1l-3.23 3a.75.75 0 1 1-1.021-1.1l2.639-2.45-2.64-2.45Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Compiler Design and Program Analysis 50.054
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Name Analysis
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="indigo" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg>
</label>
</form>
<script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<a aria-label="Share" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1" title="Share">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"></path></svg>
</a>
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/50054-cdpa/notes" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    50054-cdpa
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../handout/">
        
  
    
  
  Handout

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../schedule/">
        
  
    
  
  Schedule

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../introduction/">
          
  
    
  
  W1

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../fp_scala/">
          
  
    
  
  W2

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../fp_scala_poly/">
          
  
    
  
  W3

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../fp_applicative_monad/">
          
  
    
  
  W4

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../syntax_analysis/">
          
  
    
  
  W5

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../syntax_analysis_parser_combinator/">
          
  
    
  
  W6

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../semantic_analysis/">
          
  
    
  
  W8

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../static_semantics/">
          
  
    
  
  W9

        </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="./">
          
  
    
  
  W10

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../sign_analysis_lattice/">
          
  
    
  
  W11

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../code_generation/">
          
  
    
  
  W12

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../memory_management/">
          
  
    
  
  W13

        </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Compiler Design and Program Analysis 50.054" class="md-nav__button md-logo" data-md-component="logo" href=".." title="Compiler Design and Program Analysis 50.054">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 3a2 2 0 0 1 2-2h9.982a2 2 0 0 1 1.414.586l4.018 4.018A2 2 0 0 1 21 7.018V21a2 2 0 0 1-2 2H4.75a.75.75 0 0 1 0-1.5H19a.5.5 0 0 0 .5-.5V8.5h-4a2 2 0 0 1-2-2v-4H5a.5.5 0 0 0-.5.5v6.25a.75.75 0 0 1-1.5 0Zm12-.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 0-.146-.336l-4.018-4.018A.5.5 0 0 0 15 2.5Z"></path><path d="M4.53 12.24a.75.75 0 0 1-.039 1.06l-2.639 2.45 2.64 2.45a.75.75 0 1 1-1.022 1.1l-3.23-3a.75.75 0 0 1 0-1.1l3.23-3a.75.75 0 0 1 1.06.04Zm3.979 1.06a.75.75 0 1 1 1.02-1.1l3.231 3a.75.75 0 0 1 0 1.1l-3.23 3a.75.75 0 1 1-1.021-1.1l2.639-2.45-2.64-2.45Z"></path></svg>
</a>
    Compiler Design and Program Analysis 50.054
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/50054-cdpa/notes" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    50054-cdpa
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../handout/">
<span class="md-ellipsis">
    Handout
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../schedule/">
<span class="md-ellipsis">
    Schedule
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    W1
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            W1
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../introduction/">
<span class="md-ellipsis">
    Intro
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../fp_intro/">
<span class="md-ellipsis">
    FP Intro
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    W2
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            W2
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../fp_scala/">
<span class="md-ellipsis">
    FP Scala
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    W3
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            W3
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../fp_scala_poly/">
<span class="md-ellipsis">
    FP Scala Polymorphic
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    W4
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            W4
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../fp_applicative_monad/">
<span class="md-ellipsis">
    FP Applicative Monads
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
<span class="md-ellipsis">
    W5
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            W5
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../syntax_analysis/">
<span class="md-ellipsis">
    Syntax Analysis
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
<span class="md-ellipsis">
    W6
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            W6
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../syntax_analysis_parser_combinator/">
<span class="md-ellipsis">
    Syntax Analysis Parser Combinator
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ir_pseudo_assembly/">
<span class="md-ellipsis">
    IR &amp; Pseudo Assembly
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
<span class="md-ellipsis">
    W8
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_9_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_9">
<span class="md-nav__icon md-icon"></span>
            W8
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../semantic_analysis/">
<span class="md-ellipsis">
    Semantic Analysis
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../dynamic_semantics/">
<span class="md-ellipsis">
    Dynamic Semantics
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
<span class="md-ellipsis">
    W9
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_10_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_10">
<span class="md-nav__icon md-icon"></span>
            W9
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../static_semantics/">
<span class="md-ellipsis">
    Static Semantics
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../static_semantics_2/">
<span class="md-ellipsis">
    Static Semantics for Lambda Calculus
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_11" type="checkbox"/>
<label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="">
<span class="md-ellipsis">
    W10
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_11_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_11">
<span class="md-nav__icon md-icon"></span>
            W10
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Name Analysis
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Name Analysis
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#learning-outcomes">
<span class="md-ellipsis">
      Learning Outcomes
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#what-is-name-analysis">
<span class="md-ellipsis">
      What is Name Analysis
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#variable-scope">
<span class="md-ellipsis">
      Variable Scope
    </span>
</a>
<nav aria-label="Variable Scope" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#static-variable-scoping">
<span class="md-ellipsis">
      Static Variable Scoping
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dynamic-variable-scoping">
<span class="md-ellipsis">
      Dynamic Variable Scoping
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#more-on-static-variable-scoping">
<span class="md-ellipsis">
      More On Static Variable Scoping
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#static-single-assignment-form">
<span class="md-ellipsis">
      Static Single Assignment form
    </span>
</a>
<nav aria-label="Static Single Assignment form" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#unstructured-ssa-form">
<span class="md-ellipsis">
      Unstructured SSA Form
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#minimality">
<span class="md-ellipsis">
      Minimality
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ssa-construction-algorithm">
<span class="md-ellipsis">
      SSA Construction Algorithm
    </span>
</a>
<nav aria-label="SSA Construction Algorithm" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#control-flow-graph">
<span class="md-ellipsis">
      Control flow graph
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#identifying-the-right-locations">
<span class="md-ellipsis">
      Identifying the "right" locations
    </span>
</a>
<nav aria-label="Identifying the " class="md-nav" locations"="" right"="">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#definition-1-graph">
<span class="md-ellipsis">
      Definition 1 - Graph
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#definition-2-path">
<span class="md-ellipsis">
      Definition 2 - Path
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#definition-3-connectedness">
<span class="md-ellipsis">
      Definition 3 - Connectedness
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#definition-4-source-and-sink">
<span class="md-ellipsis">
      Definition 4 - Source and Sink
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#assumption">
<span class="md-ellipsis">
      Assumption
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#definition-5-dominance-relation">
<span class="md-ellipsis">
      Definition 5 - Dominance Relation
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#lemma-1-dominance-is-transitive">
<span class="md-ellipsis">
      Lemma 1 - Dominance is transitive
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#lemma-2-dominance-is-reflexive">
<span class="md-ellipsis">
      Lemma 2 - Dominance is reflexive
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#definition-6-strict-dominance">
<span class="md-ellipsis">
      Definition 6 - Strict Dominance
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#definition-7-immediate-dominator">
<span class="md-ellipsis">
      Definition 7 - Immediate Dominator
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dominator-tree">
<span class="md-ellipsis">
      Dominator Tree
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#definition-8-dominance-frontier">
<span class="md-ellipsis">
      Definition 8 - Dominance Frontier
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#computing-dominance-frontier">
<span class="md-ellipsis">
      Computing Dominance Frontier
    </span>
</a>
<nav aria-label="Computing Dominance Frontier" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#re-definining-dominance-frontier">
<span class="md-ellipsis">
      Re-definining Dominance Frontier
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dominance-frontier-algorithm">
<span class="md-ellipsis">
      Dominance frontier algorithm
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#definition-9-iterative-dominance-frontier">
<span class="md-ellipsis">
      Definition 9 - Iterative Dominance Frontier
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ssa-construction-algorithm_1">
<span class="md-ellipsis">
      SSA construction algorithm
    </span>
</a>
<nav aria-label="SSA construction algorithm" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#inserting-phi-assignments">
<span class="md-ellipsis">
      Inserting Phi assignments
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#renaming-variables">
<span class="md-ellipsis">
      Renaming Variables
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ssa-back-to-pseudo-assembly">
<span class="md-ellipsis">
      SSA back to Pseudo Assembly
    </span>
</a>
<nav aria-label="SSA back to Pseudo Assembly" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#relocating-the-phi-assignments">
<span class="md-ellipsis">
      Relocating the phi-assignments
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#relabelling">
<span class="md-ellipsis">
      Relabelling
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#structured-ssa">
<span class="md-ellipsis">
      Structured SSA
    </span>
</a>
<nav aria-label="Structured SSA" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#futher-readings">
<span class="md-ellipsis">
      Futher Readings
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_12" type="checkbox"/>
<label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
<span class="md-ellipsis">
    W11
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_12_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_12">
<span class="md-nav__icon md-icon"></span>
            W11
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../sign_analysis_lattice/">
<span class="md-ellipsis">
    Lattices &amp; Sign Analysis
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../liveness_analysis/">
<span class="md-ellipsis">
    Liveness Analysis
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../code_generation/">
<span class="md-ellipsis">
    Code Generation
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_13" type="checkbox"/>
<label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
<span class="md-ellipsis">
    W12
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_13_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_13">
<span class="md-nav__icon md-icon"></span>
            W12
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../code_generation/">
<span class="md-ellipsis">
    Code Generation
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../advanced_static_analysis/">
<span class="md-ellipsis">
    Information Flow Analysis
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_14" type="checkbox"/>
<label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
<span class="md-ellipsis">
    W13
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_14_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_14">
<span class="md-nav__icon md-icon"></span>
            W13
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../memory_management/">
<span class="md-ellipsis">
    Memory Management
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#learning-outcomes">
<span class="md-ellipsis">
      Learning Outcomes
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#what-is-name-analysis">
<span class="md-ellipsis">
      What is Name Analysis
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#variable-scope">
<span class="md-ellipsis">
      Variable Scope
    </span>
</a>
<nav aria-label="Variable Scope" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#static-variable-scoping">
<span class="md-ellipsis">
      Static Variable Scoping
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dynamic-variable-scoping">
<span class="md-ellipsis">
      Dynamic Variable Scoping
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#more-on-static-variable-scoping">
<span class="md-ellipsis">
      More On Static Variable Scoping
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#static-single-assignment-form">
<span class="md-ellipsis">
      Static Single Assignment form
    </span>
</a>
<nav aria-label="Static Single Assignment form" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#unstructured-ssa-form">
<span class="md-ellipsis">
      Unstructured SSA Form
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#minimality">
<span class="md-ellipsis">
      Minimality
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ssa-construction-algorithm">
<span class="md-ellipsis">
      SSA Construction Algorithm
    </span>
</a>
<nav aria-label="SSA Construction Algorithm" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#control-flow-graph">
<span class="md-ellipsis">
      Control flow graph
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#identifying-the-right-locations">
<span class="md-ellipsis">
      Identifying the "right" locations
    </span>
</a>
<nav aria-label="Identifying the " class="md-nav" locations"="" right"="">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#definition-1-graph">
<span class="md-ellipsis">
      Definition 1 - Graph
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#definition-2-path">
<span class="md-ellipsis">
      Definition 2 - Path
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#definition-3-connectedness">
<span class="md-ellipsis">
      Definition 3 - Connectedness
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#definition-4-source-and-sink">
<span class="md-ellipsis">
      Definition 4 - Source and Sink
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#assumption">
<span class="md-ellipsis">
      Assumption
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#definition-5-dominance-relation">
<span class="md-ellipsis">
      Definition 5 - Dominance Relation
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#lemma-1-dominance-is-transitive">
<span class="md-ellipsis">
      Lemma 1 - Dominance is transitive
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#lemma-2-dominance-is-reflexive">
<span class="md-ellipsis">
      Lemma 2 - Dominance is reflexive
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#definition-6-strict-dominance">
<span class="md-ellipsis">
      Definition 6 - Strict Dominance
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#definition-7-immediate-dominator">
<span class="md-ellipsis">
      Definition 7 - Immediate Dominator
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dominator-tree">
<span class="md-ellipsis">
      Dominator Tree
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#definition-8-dominance-frontier">
<span class="md-ellipsis">
      Definition 8 - Dominance Frontier
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#computing-dominance-frontier">
<span class="md-ellipsis">
      Computing Dominance Frontier
    </span>
</a>
<nav aria-label="Computing Dominance Frontier" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#re-definining-dominance-frontier">
<span class="md-ellipsis">
      Re-definining Dominance Frontier
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dominance-frontier-algorithm">
<span class="md-ellipsis">
      Dominance frontier algorithm
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#definition-9-iterative-dominance-frontier">
<span class="md-ellipsis">
      Definition 9 - Iterative Dominance Frontier
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ssa-construction-algorithm_1">
<span class="md-ellipsis">
      SSA construction algorithm
    </span>
</a>
<nav aria-label="SSA construction algorithm" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#inserting-phi-assignments">
<span class="md-ellipsis">
      Inserting Phi assignments
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#renaming-variables">
<span class="md-ellipsis">
      Renaming Variables
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ssa-back-to-pseudo-assembly">
<span class="md-ellipsis">
      SSA back to Pseudo Assembly
    </span>
</a>
<nav aria-label="SSA back to Pseudo Assembly" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#relocating-the-phi-assignments">
<span class="md-ellipsis">
      Relocating the phi-assignments
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#relabelling">
<span class="md-ellipsis">
      Relabelling
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#structured-ssa">
<span class="md-ellipsis">
      Structured SSA
    </span>
</a>
<nav aria-label="Structured SSA" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#futher-readings">
<span class="md-ellipsis">
      Futher Readings
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="50054-name-analysis">50.054 - Name Analysis<a class="headerlink" href="#50054-name-analysis" title="Permanent link">¶</a></h1>
<h2 id="learning-outcomes">Learning Outcomes<a class="headerlink" href="#learning-outcomes" title="Permanent link">¶</a></h2>
<ol>
<li>Articulate the purpose of name analysis.</li>
<li>Describe the properties of the static single assignment forms.</li>
<li>Implement the static single assignment construction and deconstruction algorithms.</li>
</ol>
<h2 id="what-is-name-analysis">What is Name Analysis<a class="headerlink" href="#what-is-name-analysis" title="Permanent link">¶</a></h2>
<p>Given a source program (or AST), the compiler needs to check for each identifier defined (i.e. name).</p>
<ol>
<li>Is it a variable name or a function name? This is not an issue for SIMP language as we don't deal with function at the momement.</li>
<li>Is the variable name of type int or bool? This has been addressed via the type inference and type checking in the previous unit.</li>
<li>What is the scope of the variable?</li>
<li>Has the variable been declared before used?</li>
<li>Where is the defined variable used?</li>
</ol>
<h2 id="variable-scope">Variable Scope<a class="headerlink" href="#variable-scope" title="Permanent link">¶</a></h2>
<p>Consider the following Python program, </p>
<p><div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2"></a>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4"></a>    <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5"></a>    <span class="k">return</span> <span class="n">g</span><span class="p">()</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6"></a>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="k">def</span> <span class="nf">g</span><span class="p">():</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9"></a>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="n">f</span><span class="p">()</span>
</span></code></pre></div></td></tr></table></div>
When the program is executed, we observe <code>-1</code> being printed. The variable <code>x=1</code> in <code>f()</code> does not modify the <code>x=-1</code> in the outer scope. Hence when <code>g()</code> is called, the variable <code>x</code> being printed is from the global scope <code>x=-1</code>. This is known as <em>static scoping</em>. </p>
<h3 id="static-variable-scoping">Static Variable Scoping<a class="headerlink" href="#static-variable-scoping" title="Permanent link">¶</a></h3>
<p>For a programming language with static variable scoping, the relation between a variable's definition and its reference is defined by its syntactic structure, (also known as lexical structure). For instance the earlier example shows that Python is using static variable scoping, because the Python program has the following syntactic structure (e.g. Syntax Tree).</p>
<pre class="mermaid"><code>graph TD;
    Main --&gt; x1["x=-1"];
    Main --&gt; f;
    f --&gt; x2[x=1];
    Main --&gt; g;
    g --&gt; usex1["print(x)"];</code></pre>
<p>Thus the <code>print(x)</code> of <code>g</code> uses the <code>x</code> defined in its parent node.</p>
<h3 id="dynamic-variable-scoping">Dynamic Variable Scoping<a class="headerlink" href="#dynamic-variable-scoping" title="Permanent link">¶</a></h3>
<p>For a programming language with dynamic scoping, the relation between a variable's definition and its reference is defined by the dynamic call stack. </p>
<p><div class="language-perl highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="nv">$x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2"></a>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="k">sub</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">$x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">g</span><span class="p">();</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="p">}</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7"></a>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="k">sub</span><span class="w"> </span><span class="nf">g</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="w">    </span><span class="k">print</span><span class="w"> </span><span class="nv">$x</span><span class="p">;</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="p">}</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="n">f</span><span class="p">()</span>
</span></code></pre></div></td></tr></table></div>
In the above, it is the same program coded in <code>perl</code>. Except that in perl, variables with <code>local</code> are defined using dynamic scoping. As a result, <code>1</code> is printed when the program is executed. When a program with dynamic variable scoping is executed, its variable reference follows the </p>
<pre class="mermaid"><code>graph TD;
    Main --&gt; x1["x=-1"];
    Main --&gt; f;
    f --&gt; x2[x=1];
    f --&gt; g;
    g --&gt; usex1["print(x)"];    </code></pre>
<p>As illustrated by the dynamic call graph above, the variable <code>x</code> in <code>print(x)</code> refers to <code>g</code>'s caller, i.e. <code>f</code>, which is <code>1</code>.</p>
<h3 id="more-on-static-variable-scoping">More On Static Variable Scoping<a class="headerlink" href="#more-on-static-variable-scoping" title="Permanent link">¶</a></h3>
<p>Static Variable Scoping is dominating the program language market now. Most of the main stream languages uses static variable scoping thanks to its ease of reasoning, e.g. C, C++, Python, Java and etc. Among these languages, there are also some minor variant of static variable scoping implementation.</p>
<p>Consider the following Python program.</p>
<p><div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">1</a></span>
<span class="normal"><a href="#__codelineno-2-2">2</a></span>
<span class="normal"><a href="#__codelineno-2-3">3</a></span>
<span class="normal"><a href="#__codelineno-2-4">4</a></span>
<span class="normal"><a href="#__codelineno-2-5">5</a></span>
<span class="normal"><a href="#__codelineno-2-6">6</a></span>
<span class="normal"><a href="#__codelineno-2-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">argv</span><span class="p">):</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2"></a>    <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3"></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4"></a>        <span class="n">x</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5"></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6"></a>        <span class="n">y</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
when the input <code>argv</code> is a non-empty list, the function <code>main</code> prints <code>1</code> as results. However when <code>argv</code> is an empty list, a run-time error arises.</p>
<p>Consider the "nearly-the-same" program in Java.</p>
<div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-3-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-3-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-3-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-3-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-3-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-3-10">10</a></span>
<span class="normal"><a href="#__codelineno-3-11">11</a></span>
<span class="normal"><a href="#__codelineno-3-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="kd">class</span> <span class="nc">Main</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">argv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">argv</span><span class="p">.</span><span class="na">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">){</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="w">            </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">y</span><span class="p">.</span><span class="na">toString</span><span class="p">());</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Java returns a compilation error, complaining variable <code>y</code> being use in the <code>System.out.println</code> function can't be resolved.</p>
<p>The difference here is that in Python, all variables declared in a function share the same scope. While in Java, variable's scope is further divided based on the control flow statement such as if-else, while and etc. In the above example, the variable <code>y</code>'s scope is only within the else branch but not outside.</p>
<p>In SIMP, we assume the same variable scoping implementation as Python, i.e. all variables declared in a function shared the same scope, and since the SIMP language we have so far does not support function call, we further simplify the problem that all variables are sharing same scope. </p>
<p>However how might we detect the run-time error similar to what we've observed from the last Python example? </p>
<p>Let's recast the example in SIMP, let's call it <code>SIMP_ERR1</code>
<div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span>
<span class="normal"><a href="#__codelineno-4-3">3</a></span>
<span class="normal"><a href="#__codelineno-4-4">4</a></span>
<span class="normal"><a href="#__codelineno-4-5">5</a></span>
<span class="normal"><a href="#__codelineno-4-6">6</a></span>
<span class="normal"><a href="#__codelineno-4-7">7</a></span>
<span class="normal"><a href="#__codelineno-4-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="c1">// SIMP_ERR1</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="k">if</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="w">    </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="w">    </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="p">}</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="k">return</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
</span></code></pre></div></td></tr></table></div></p>
<p>The above program will cause an error when <code>input == 0</code>. It is typeable based on the type inference algorithm we studied in the previous class. 
Let's consider its pseudo assembly version. The Maximal Munch algorithm v2 produces the following given the SIMP program.</p>
<p><div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">1</a></span>
<span class="normal"><a href="#__codelineno-5-2">2</a></span>
<span class="normal"><a href="#__codelineno-5-3">3</a></span>
<span class="normal"><a href="#__codelineno-5-4">4</a></span>
<span class="normal"><a href="#__codelineno-5-5">5</a></span>
<span class="normal"><a href="#__codelineno-5-6">6</a></span>
<span class="normal"><a href="#__codelineno-5-7">7</a></span>
<span class="normal"><a href="#__codelineno-5-8">8</a></span>
<span class="normal"><a href="#__codelineno-5-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="c1">// PA_ERR1</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="mi">1</span><span class="p">:</span><span class="w">  </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="mi">2</span><span class="p">:</span><span class="w">  </span><span class="n">t</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="mi">3</span><span class="p">:</span><span class="w">  </span><span class="n">ifn</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="mi">6</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="mi">4</span><span class="p">:</span><span class="w">  </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">2</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="mi">5</span><span class="p">:</span><span class="w">  </span><span class="k">goto</span><span class="w"> </span><span class="mi">7</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="mi">6</span><span class="p">:</span><span class="w">  </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="mi">7</span><span class="p">:</span><span class="w">  </span><span class="n">rret</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">y</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="mi">8</span><span class="p">:</span><span class="w">  </span><span class="n">ret</span>
</span></code></pre></div></td></tr></table></div>
Same error arises when <code>input == 0</code>. </p>
<h2 id="static-single-assignment-form">Static Single Assignment form<a class="headerlink" href="#static-single-assignment-form" title="Permanent link">¶</a></h2>
<p>Static Single Assignment (SSA) form is an intermediate representation 
widely used in compiler design and program verification. </p>
<p>In a static single assignment form, </p>
<ul>
<li>Each variable is only allowed to be assigned once syntactically, i.e. it only appears in the LHS of the assignment once. </li>
<li><span class="arithmatex">\(\phi\)</span>-assignments are placed at the end of branching statements to merge different (re)-definition of the same variable (from the source program). </li>
</ul>
<p>SSA form construction is one of the effective ways to analysis</p>
<ol>
<li>the scope of variables</li>
<li>the use-def relationship of variables</li>
</ol>
<h3 id="unstructured-ssa-form">Unstructured SSA Form<a class="headerlink" href="#unstructured-ssa-form" title="Permanent link">¶</a></h3>
<p>Suppose we extend the pseudo assembly with <span class="arithmatex">\(\phi\)</span>-assignment statements, </p>
<div class="arithmatex">\[
\begin{array}{rccl}
(\tt Labeled\ Instruction) &amp; li  &amp; ::= &amp; l : \overline{\phi}\ i \\ 
(\tt Instruction)   &amp; i   &amp; ::= &amp; d \leftarrow s \mid d \leftarrow s\ op\ s \mid ret \mid ifn\ s\ goto\ l \mid goto\ l \\ 
(\tt PhiAssignment) &amp; \phi &amp; ::= &amp; d \leftarrow phi(\overline{l:s}) \\ 
(\tt Labeled\ Instructions)   &amp; lis   &amp; ::= &amp; li \mid li\ lis \\ 
(\tt Operand)       &amp; d,s &amp; ::= &amp; r \mid c \mid t \\
(\tt Temp\ Var)      &amp; t   &amp; ::= &amp; x \mid y \mid ...  \\
(\tt Label)         &amp; l   &amp; ::= &amp; 1 \mid 2 \mid ... \\
(\tt Operator)      &amp; op  &amp; ::= &amp; + \mid - \mid &lt; \mid == \mid ... \\ 
(\tt Constant)      &amp; c   &amp; ::= &amp; 0 \mid 1 \mid 2 \mid ... \\ 
(\tt Register)      &amp; r &amp;   ::= &amp; r_{ret} \mid r_1 \mid r_2 \mid ...  
\end{array}
\]</div>
<p>The syntax is largely unchanged, except that for each labeled instruction, there exists a sequence of phi assignments <span class="arithmatex">\(\overline{\phi}\)</span>. (which could be empty) before the actual instruction <span class="arithmatex">\(i\)</span>. When <span class="arithmatex">\(\overline{\phi}\)</span> is empty, we omit it from the syntax.</p>
<p>we are able convert any "well-defined" pseudo assembly program into an SSA form. Since we build the SSA forms from some unstructured language program (i.e. no nested control flow statements), we call them unstructured SSA forms.</p>
<p>Suppose we have the following pseudo assembly program </p>
<div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-6-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-6-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-6-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-6-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-6-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-6-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-6-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-6-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-6-10">10</a></span>
<span class="normal"><a href="#__codelineno-6-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="c1">// PA1</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">input</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="mi">4</span><span class="p">:</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="mi">5</span><span class="p">:</span><span class="w"> </span><span class="n">ifn</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="mi">9</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="mi">6</span><span class="p">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="mi">7</span><span class="p">:</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9"></a><span class="mi">8</span><span class="p">:</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="mi">4</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10"></a><span class="mi">9</span><span class="p">:</span><span class="w"> </span><span class="n">rret</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">s</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11"></a><span class="mi">10</span><span class="p">:</span><span class="w"> </span><span class="n">ret</span>
</span></code></pre></div></td></tr></table></div>
<p>Note that variables <code>s</code> and <code>c</code> are re-assigned in the loop. </p>
<p>The SSA form of the above is </p>
<div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-7-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-7-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-7-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-7-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-7-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-7-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-7-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-7-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-7-10">10</a></span>
<span class="normal"><a href="#__codelineno-7-11">11</a></span>
<span class="normal"><a href="#__codelineno-7-12">12</a></span>
<span class="normal"><a href="#__codelineno-7-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="c1">// SSA_PA1</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="n">x0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">input</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="n">s0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="n">c0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="mi">4</span><span class="p">:</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">phi</span><span class="p">(</span><span class="mi">3</span><span class="p">:</span><span class="n">s0</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">:</span><span class="n">s2</span><span class="p">)</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="w">   </span><span class="n">c1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">phi</span><span class="p">(</span><span class="mi">3</span><span class="p">:</span><span class="n">c0</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">:</span><span class="n">c2</span><span class="p">)</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="w">   </span><span class="n">t0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">x0</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="mi">5</span><span class="p">:</span><span class="w"> </span><span class="n">ifn</span><span class="w"> </span><span class="n">t0</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="mi">9</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="mi">6</span><span class="p">:</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s1</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10"></a><span class="mi">7</span><span class="p">:</span><span class="w"> </span><span class="n">c2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11"></a><span class="mi">8</span><span class="p">:</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="mi">4</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12"></a><span class="mi">9</span><span class="p">:</span><span class="w"> </span><span class="n">rret</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13"></a><span class="mi">10</span><span class="p">:</span><span class="w"> </span><span class="n">ret</span>
</span></code></pre></div></td></tr></table></div>
<p>In the above example, we inserted a set of phi assigments to label 4. Every variable/register is strictly assigned once. We need to introduce a new "variant" of the same source variable whenever re-assignment is needed. More specifically, in instruction with label 4, we use two phi assignments to merge the multiple definitions of the same source variable.  </p>
<p>There are two possible preceding instructions that lead us to the following instruction
<div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span>
<span class="normal"><a href="#__codelineno-8-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="mi">4</span><span class="p">:</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">phi</span><span class="p">(</span><span class="mi">3</span><span class="p">:</span><span class="n">s0</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">:</span><span class="n">s2</span><span class="p">)</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="w">   </span><span class="n">c1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">phi</span><span class="p">(</span><span class="mi">3</span><span class="p">:</span><span class="n">c0</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">:</span><span class="n">c2</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
namely, 3 and 9. When the preceding instruction is 3, the above phi assignments will assign <code>s0</code> to <code>s1</code> and <code>c0</code> to <code>c1</code>. Otherwise, <code>s2</code> is assigned to <code>s1</code> and <code>c2</code> is assigned to <code>c1</code>.</p>
<p>To cater for the phi assignment, we extend the small step operational semantics from</p>
<div class="arithmatex">\[
P \vdash (L, li) \longrightarrow (L', li')
\]</div>
<p>to </p>
<div class="arithmatex">\[
P \vdash (L, li, p) \longrightarrow (L', li', p')
\]</div>
<p>The third component <span class="arithmatex">\(p\)</span> in the program context is a label from the preceding instruction based on the execution. </p>
<div class="arithmatex">\[
{\tt (pConst)} ~~~ P \vdash (L, l:  d \leftarrow c, p) \longrightarrow (L \oplus (d,c), P(l+1), l)
\]</div>
<div class="arithmatex">\[
{\tt (pRegister)} ~~~P \vdash (L, l: d \leftarrow r, p) \longrightarrow (L \oplus (d,L(r)), P(l+1), l)
\]</div>
<div class="arithmatex">\[
{\tt (pTempVar)} ~~~P \vdash (L, l: d \leftarrow t, p ) \longrightarrow (L \oplus (d,L(t)), P(l+1), l)
\]</div>
<div class="arithmatex">\[
{\tt (pGoto)} ~~ P \vdash (L, l:goto\ l', p) \longrightarrow (L, P(l'), l)
\]</div>
<div class="arithmatex">\[
\begin{array}{rc}
{\tt (pOp)} &amp;  \begin{array}{c}
        c_1 = L(s_1) ~~~ c_2 = L(s_2) ~~~ c_3 = c_1\ op\ c_2
        \\ \hline
        P \vdash (L, l: d \leftarrow s_1\ op\ s_2, p) \longrightarrow (L \oplus (d,c_3), P(l+1), l)  
        \end{array}
\\
{\tt (pIfn0)} &amp; \begin{array}{c}
     L(s) = 0
     \\ \hline
     P \vdash (L, l: ifn\ s\ goto\ l', p) \longrightarrow (L, P(l'), l)
     \end{array}
\\
{\tt (pIfnNot0)} &amp; \begin{array}{c}
     L(s) \neq  0
     \\ \hline
     P \vdash (L, l: ifn\ s\ goto\ l', p) \longrightarrow (L, P(l+1), l)
     \end{array}
\end{array}
\]</div>
<p>All the existing rules are required some minor changes to accomodate the third component in the program context. 
The adjustments are common, i.e. propogating the label of the current labeled instruction from the LHS to the RHS as the proceding label.
Note that the above handle the cases in which the labeled instruction has no phi assignments.  In the presence of phi-assignments, 
we need the following rules to guide the execution.</p>
<div class="arithmatex">\[
\begin{array}{rc}
{\tt (pPhi1)} &amp;  \begin{array}{c}
        (L, l: []\ i, p) \longrightarrow (L, l: i, p)
        \end{array} \\ \\
{\tt (pPhi2)} &amp;  \begin{array}{c}
        l_i = p\ \ \ c_i = L(s_i) \\  j \in [1,i-1]: l_j \neq p 
        \\ \hline
        (L, l: d \leftarrow phi(l_1:s_1,..,l_n:s_n); \overline{\phi}\ i , p) \longrightarrow (L\oplus(d,c_i), l: \overline{\phi}\ i, p)  
        \end{array}
\end{array}
\]</div>
<p>The execution of the labeled instruction with phi assignments is defined by the <span class="arithmatex">\((\tt pPhi1)\)</span> and <span class="arithmatex">\((\tt pPhi2)\)</span> rules. </p>
<ul>
<li>The <span class="arithmatex">\((\tt pPhi1)\)</span> rule handles the base case where <span class="arithmatex">\(\overline{\phi}\)</span> is an empty sequence, it proceeds to execute the following instruction <span class="arithmatex">\(i\)</span> by using one of the earlier rules. </li>
<li>The <span class="arithmatex">\((\tt pPhi2)\)</span> rule is applied when the sequence of phi-assignments is not empty. <ol>
<li>We process the first one phi-assignment. By scanning the set of labels in the <span class="arithmatex">\(phi()\)</span>'s operands from left to right, we identify the first matching label <span class="arithmatex">\(l_i\)</span> and lookup the value of the associated variable/register <span class="arithmatex">\(s_i\)</span>, i.e. <span class="arithmatex">\(c_i\)</span>.</li>
<li>Add the new entry <span class="arithmatex">\((d,c_i)\)</span> to the local environment <span class="arithmatex">\(L\)</span>. </li>
<li>Proceed by recursively processing the rest of the phi assignments with the updated <span class="arithmatex">\(L \oplus (d,c_i)\)</span>.</li>
</ol>
</li>
</ul>
<p>Given <span class="arithmatex">\(input = 1\)</span>, excuting <code>SSA_PA1</code> yields the following derivation</p>
<div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span>
<span class="normal"><a href="#__codelineno-9-11">11</a></span>
<span class="normal"><a href="#__codelineno-9-12">12</a></span>
<span class="normal"><a href="#__codelineno-9-13">13</a></span>
<span class="normal"><a href="#__codelineno-9-14">14</a></span>
<span class="normal"><a href="#__codelineno-9-15">15</a></span>
<span class="normal"><a href="#__codelineno-9-16">16</a></span>
<span class="normal"><a href="#__codelineno-9-17">17</a></span>
<span class="normal"><a href="#__codelineno-9-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="n">P</span><span class="w"> </span><span class="o">|-</span><span class="w"> </span><span class="p">{(</span><span class="n">input</span><span class="p">,</span><span class="mi">1</span><span class="p">)},</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="n">x0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">undef</span><span class="w"> </span><span class="o">---&gt;</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="n">pTempVar</span><span class="p">)</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="n">P</span><span class="w"> </span><span class="o">|-</span><span class="w"> </span><span class="p">{(</span><span class="n">input</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">x0</span><span class="p">,</span><span class="mi">1</span><span class="p">)},</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="n">s0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">---&gt;</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="n">pConst</span><span class="p">)</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="n">P</span><span class="w"> </span><span class="o">|-</span><span class="w"> </span><span class="p">{(</span><span class="n">input</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">x0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s0</span><span class="p">,</span><span class="mi">0</span><span class="p">)},</span><span class="w"> </span><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="n">c0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">---&gt;</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="n">pConst</span><span class="p">)</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="n">P</span><span class="w"> </span><span class="o">|-</span><span class="w"> </span><span class="p">{(</span><span class="n">input</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">x0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c0</span><span class="p">,</span><span class="mi">0</span><span class="p">)},</span><span class="w"> </span><span class="mi">4</span><span class="p">:</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">phi</span><span class="p">(</span><span class="mi">3</span><span class="p">:</span><span class="n">s0</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="p">:</span><span class="n">s2</span><span class="p">);</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">phi</span><span class="p">(</span><span class="mi">3</span><span class="p">:</span><span class="n">c0</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="p">:</span><span class="n">c2</span><span class="p">)</span><span class="w"> </span><span class="n">t0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">---&gt;</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="n">pPhi2</span><span class="p">)</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="n">P</span><span class="w"> </span><span class="o">|-</span><span class="w"> </span><span class="p">{(</span><span class="n">input</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">x0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s1</span><span class="p">,</span><span class="mi">0</span><span class="p">)},</span><span class="w"> </span><span class="mi">4</span><span class="p">:</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">phi</span><span class="p">(</span><span class="mi">3</span><span class="p">:</span><span class="n">c0</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="p">:</span><span class="n">c2</span><span class="p">)</span><span class="w"> </span><span class="n">t0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">---&gt;</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="n">pPhi2</span><span class="p">)</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="n">P</span><span class="w"> </span><span class="o">|-</span><span class="w"> </span><span class="p">{(</span><span class="n">input</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">x0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">4</span><span class="p">:</span><span class="w"> </span><span class="o">[]</span><span class="w"> </span><span class="n">t0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">---&gt;</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="n">pPhi1</span><span class="p">)</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="n">P</span><span class="w"> </span><span class="o">|-</span><span class="w"> </span><span class="p">{(</span><span class="n">input</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">x0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">4</span><span class="p">:</span><span class="w"> </span><span class="n">t0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">---&gt;</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="n">pOp</span><span class="p">)</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="n">P</span><span class="w"> </span><span class="o">|-</span><span class="w"> </span><span class="p">{(</span><span class="n">input</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">x0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">t0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)},</span><span class="w"> </span><span class="mi">5</span><span class="p">:</span><span class="w"> </span><span class="n">ifn</span><span class="w"> </span><span class="n">t0</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">---&gt;</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="n">pIfnNot0</span><span class="p">)</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="n">P</span><span class="w"> </span><span class="o">|-</span><span class="w"> </span><span class="p">{(</span><span class="n">input</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">x0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">t0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)},</span><span class="w"> </span><span class="mi">6</span><span class="p">:</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s1</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w">  </span><span class="o">---&gt;</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="n">pOp</span><span class="p">)</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="n">P</span><span class="w"> </span><span class="o">|-</span><span class="w"> </span><span class="p">{(</span><span class="n">input</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">x0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">t0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)},</span><span class="w"> </span><span class="mi">7</span><span class="p">:</span><span class="w"> </span><span class="n">c2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="w">  </span><span class="o">---&gt;</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="n">pOp</span><span class="p">)</span>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="n">P</span><span class="w"> </span><span class="o">|-</span><span class="w"> </span><span class="p">{(</span><span class="n">input</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">x0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">t0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)},</span><span class="w"> </span><span class="mi">8</span><span class="p">:</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="w">  </span><span class="o">---&gt;</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="n">pGoto</span><span class="p">)</span>
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12"></a><span class="n">P</span><span class="w"> </span><span class="o">|-</span><span class="w"> </span><span class="p">{(</span><span class="n">input</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">x0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">t0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)},</span><span class="w"> </span><span class="mi">4</span><span class="p">:</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">phi</span><span class="p">(</span><span class="mi">3</span><span class="p">:</span><span class="n">s0</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">:</span><span class="n">s2</span><span class="p">);</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">phi</span><span class="p">(</span><span class="mi">3</span><span class="p">:</span><span class="n">c0</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">:</span><span class="n">c2</span><span class="p">)</span><span class="w"> </span><span class="n">t0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="o">---&gt;</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="n">pPhi2</span><span class="p">)</span>
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13"></a><span class="n">P</span><span class="w"> </span><span class="o">|-</span><span class="w"> </span><span class="p">{(</span><span class="n">input</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">x0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">t0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)},</span><span class="w"> </span><span class="mi">4</span><span class="p">:</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">phi</span><span class="p">(</span><span class="mi">3</span><span class="p">:</span><span class="n">c0</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">:</span><span class="n">c2</span><span class="p">)</span><span class="w"> </span><span class="n">t0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="o">---&gt;</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="n">pPhi2</span><span class="p">)</span>
</span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14"></a><span class="n">P</span><span class="w"> </span><span class="o">|-</span><span class="w"> </span><span class="p">{(</span><span class="n">input</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">x0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">t0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)},</span><span class="w"> </span><span class="mi">4</span><span class="p">:</span><span class="w"> </span><span class="o">[]</span><span class="w"> </span><span class="n">t0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="o">---&gt;</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="n">pPhi1</span><span class="p">)</span>
</span><span id="__span-9-15"><a id="__codelineno-9-15" name="__codelineno-9-15"></a><span class="n">P</span><span class="w"> </span><span class="o">|-</span><span class="w"> </span><span class="p">{(</span><span class="n">input</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">x0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">t0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)},</span><span class="w"> </span><span class="mi">4</span><span class="p">:</span><span class="w"> </span><span class="n">t0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="o">---&gt;</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="n">pOp</span><span class="p">)</span>
</span><span id="__span-9-16"><a id="__codelineno-9-16" name="__codelineno-9-16"></a><span class="n">P</span><span class="w"> </span><span class="o">|-</span><span class="w"> </span><span class="p">{(</span><span class="n">input</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">x0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">t0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)},</span><span class="w"> </span><span class="mi">5</span><span class="p">:</span><span class="w"> </span><span class="n">ifn</span><span class="w"> </span><span class="n">t0</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">---&gt;</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="n">pIfn0</span><span class="p">)</span>
</span><span id="__span-9-17"><a id="__codelineno-9-17" name="__codelineno-9-17"></a><span class="n">P</span><span class="w"> </span><span class="o">|-</span><span class="w"> </span><span class="p">{(</span><span class="n">input</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">x0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">t0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)},</span><span class="w"> </span><span class="mi">9</span><span class="p">:</span><span class="w"> </span><span class="n">rret</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">s1</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">---&gt;</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="n">pTempVar</span><span class="p">)</span>
</span><span id="__span-9-18"><a id="__codelineno-9-18" name="__codelineno-9-18"></a><span class="n">P</span><span class="w"> </span><span class="o">|-</span><span class="w"> </span><span class="p">{(</span><span class="n">input</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">x0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">t0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">s2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">c2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">rret</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)},</span><span class="w"> </span><span class="mi">10</span><span class="p">:</span><span class="w"> </span><span class="n">ret</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="w"> </span>
</span></code></pre></div></td></tr></table></div>
<h3 id="minimality">Minimality<a class="headerlink" href="#minimality" title="Permanent link">¶</a></h3>
<p>One may argue that instead of generating <code>SSA_PA1</code>, one might generate the following static single assignment</p>
<div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-10-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-10-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-10-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-10-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-10-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-10-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-10-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-10-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-10-10">10</a></span>
<span class="normal"><a href="#__codelineno-10-11">11</a></span>
<span class="normal"><a href="#__codelineno-10-12">12</a></span>
<span class="normal"><a href="#__codelineno-10-13">13</a></span>
<span class="normal"><a href="#__codelineno-10-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="c1">// SSA_PA2</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="n">x0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">input</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="n">s0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="n">c0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="mi">4</span><span class="p">:</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">phi</span><span class="p">(</span><span class="mi">3</span><span class="p">:</span><span class="n">s0</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">:</span><span class="n">s2</span><span class="p">)</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="w">   </span><span class="n">c1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">phi</span><span class="p">(</span><span class="mi">3</span><span class="p">:</span><span class="n">c0</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">:</span><span class="n">c2</span><span class="p">)</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="w">   </span><span class="n">t0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">x0</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="mi">5</span><span class="p">:</span><span class="w"> </span><span class="n">ifn</span><span class="w"> </span><span class="n">t0</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="mi">9</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="mi">6</span><span class="p">:</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s1</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10"></a><span class="mi">7</span><span class="p">:</span><span class="w"> </span><span class="n">c2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11"></a><span class="mi">8</span><span class="p">:</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="mi">4</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12"></a><span class="mi">9</span><span class="p">:</span><span class="w"> </span><span class="n">s3</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">phi</span><span class="p">(</span><span class="mi">5</span><span class="p">:</span><span class="n">s1</span><span class="p">)</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13"></a><span class="w">   </span><span class="n">rret</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">s3</span>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14"></a><span class="mi">10</span><span class="p">:</span><span class="w"> </span><span class="n">ret</span>
</span></code></pre></div></td></tr></table></div>
<p>which will yield the same output. However we argue that <code>SSA_PA1</code> is preferred as it has the minimal number of phi assignments.</p>
<h3 id="ssa-construction-algorithm">SSA Construction Algorithm<a class="headerlink" href="#ssa-construction-algorithm" title="Permanent link">¶</a></h3>
<p>The defacto SSA construction algorithm that produces minimal SSA forms was developed by Cytron et al.</p>
<p><a href="https://doi.org/10.1145/115372.115320">https://doi.org/10.1145/115372.115320</a></p>
<p>The main idea is to take the original program and identify the "right" locations to insert phi assignments so that the result is a minimal SSA form.</p>
<h4 id="control-flow-graph">Control flow graph<a class="headerlink" href="#control-flow-graph" title="Permanent link">¶</a></h4>
<p>We can model a Pseudo Assembly program using a graph, namely the contorl flow graph.</p>
<p>For example, <code>PA1</code> can be represented as the following Control flow graph <code>Graph1_PA1</code></p>
<pre class="mermaid"><code>graph TD;
    B1("1: x &lt;- input
2: s &lt;- 0
3: c &lt;- 0")--&gt;B2;
    B2--&gt;B3;
    B2("4: t &lt;- c &lt; x 
5: ifn t goto 9")--&gt;B4("9: rret &lt;- s
10: ret");
    B3("6: s &lt;- c + s
7: c &lt;- c + 1
8: goto 4")--&gt;B2;</code></pre>
<p>For the ease of reasoning (though unnecessary), without losing the graph properties, we would consider an isomoprhic version of the above graph where the vertices with multiple instructions are further divided until each vertex contains only one instruction, let's call it <code>Graph2_PA1</code></p>
<pre class="mermaid"><code>graph TD;
    V1("1: x &lt;- input") --&gt; V2;
    V2("2: s &lt;- 0") --&gt; V3;
    V3("3: c &lt;- 0") --&gt; V4;
    V4("4: t &lt;- c &lt; x") --&gt; V5;
    V5("5: ifn t goto 9") --&gt; V9;
    V9("9: rret &lt;- s") --&gt; V10("10: ret")
    V5("5: ifn t goto 9") --&gt; V6;
    V6("6: s &lt;- c + s") --&gt; V7;
    V7("7: c &lt;- c + 1") --&gt; V8;
    V8("8: goto 4") --&gt; V4;</code></pre>
<p>Now we refer to the vertex in a control flow graph by the label.</p>
<p>The technical trick is to apply some graph operation to identify the "right" locations for phi assignments from the CFG.</p>
<h4 id="identifying-the-right-locations">Identifying the "right" locations<a class="headerlink" href="#identifying-the-right-locations" title="Permanent link">¶</a></h4>
<h5 id="definition-1-graph">Definition 1 - Graph<a class="headerlink" href="#definition-1-graph" title="Permanent link">¶</a></h5>
<p>Let <span class="arithmatex">\(G\)</span> be a graph, <span class="arithmatex">\(G = (V, E)\)</span>, where <span class="arithmatex">\(V\)</span> denotes the set of vertices and <span class="arithmatex">\(E\)</span> denote a set of edges. Let <span class="arithmatex">\(v_1 \in V\)</span> and <span class="arithmatex">\(v_2 \in V\)</span>, <span class="arithmatex">\((v_1,v_2) \in E\)</span> implies that exists an edge going from <span class="arithmatex">\(v_1\)</span> to <span class="arithmatex">\(v_2\)</span>. </p>
<p>Occassionally, we also refer to a vertex as a node in the graph. 
For convenience, we also write </p>
<ul>
<li><span class="arithmatex">\(v \in G\)</span> as the short-hand for <span class="arithmatex">\(v \in V \wedge G = (V,E)\)</span> and </li>
<li><span class="arithmatex">\((v_1, v_2) \in G\)</span> as the short-hand for <span class="arithmatex">\((v_1, v_2) \in E \wedge G = (V,E)\)</span>.</li>
</ul>
<h5 id="definition-2-path">Definition 2 - Path<a class="headerlink" href="#definition-2-path" title="Permanent link">¶</a></h5>
<p>Let <span class="arithmatex">\(v_1\)</span> and <span class="arithmatex">\(v_2\)</span> be two vertices in a graph <span class="arithmatex">\(G\)</span>. We say a path from <span class="arithmatex">\(v_1\)</span> to <span class="arithmatex">\(v_2\)</span>, written as <span class="arithmatex">\(path(v_1,v_2)\)</span>, exists iff </p>
<ol>
<li><span class="arithmatex">\(v_1 = v_2\)</span> or</li>
<li>the set of edges <span class="arithmatex">\(\{(v_1, u_1), (u_1,u_2), ..., (u_n,v_2)\} \subseteq E\)</span> where <span class="arithmatex">\(E\)</span> is the set of edges in <span class="arithmatex">\(G\)</span>.</li>
</ol>
<p>For convenience, some times we write <span class="arithmatex">\(v_1,u_1,...,u_n,v_2\)</span> to denote a particular path from <span class="arithmatex">\(v_1\)</span> to <span class="arithmatex">\(v_2\)</span>.</p>
<h5 id="definition-3-connectedness">Definition 3 - Connectedness<a class="headerlink" href="#definition-3-connectedness" title="Permanent link">¶</a></h5>
<p>Let <span class="arithmatex">\(v_1\)</span> and <span class="arithmatex">\(v_2\)</span> be two vertices in a graph <span class="arithmatex">\(G\)</span>. We say <span class="arithmatex">\(v_1\)</span> and <span class="arithmatex">\(v_2\)</span> are connected, written <span class="arithmatex">\(connect(v_1,v_2)\)</span>, iff </p>
<ol>
<li><span class="arithmatex">\(path(v_1, v_2)\)</span> or <span class="arithmatex">\(path(v_2, v_1)\)</span> exists, or </li>
<li>there exists <span class="arithmatex">\(v_3\)</span> in <span class="arithmatex">\(G\)</span> such that <span class="arithmatex">\(connect(v_1,v_3)\)</span> and <span class="arithmatex">\(connect(v_3, v_2)\)</span>.</li>
</ol>
<h5 id="definition-4-source-and-sink">Definition 4 - Source and Sink<a class="headerlink" href="#definition-4-source-and-sink" title="Permanent link">¶</a></h5>
<p>Let <span class="arithmatex">\(v\)</span> be a vertex in a graph <span class="arithmatex">\(G\)</span>, we say <span class="arithmatex">\(v\)</span> is a source vertex if there exists no entry <span class="arithmatex">\((v',v) \in E\)</span> where <span class="arithmatex">\(E\)</span> is the set of edges in <span class="arithmatex">\(G\)</span>.</p>
<p>Let <span class="arithmatex">\(v\)</span> be a vertex in a graph <span class="arithmatex">\(G\)</span>, we say <span class="arithmatex">\(v\)</span> is a sink vertex if there exists no entry <span class="arithmatex">\((v, v') \in E\)</span> where <span class="arithmatex">\(E\)</span> is the set of edges in <span class="arithmatex">\(G\)</span>.</p>
<h5 id="assumption">Assumption<a class="headerlink" href="#assumption" title="Permanent link">¶</a></h5>
<p>Since we are dealing with SIMP program's CFGs, we assume that the set of graphs we are considering are </p>
<ol>
<li>Connected, i.e. for any <span class="arithmatex">\(v_1, v_2\)</span> in <span class="arithmatex">\(G\)</span>, we have <span class="arithmatex">\(connect(v_1,v_2)\)</span> </li>
<li>Has only one source vertex, which means there is only one entry point to the program.</li>
<li>Has only one sink vertex, which means there is only one return statement.</li>
</ol>
<h5 id="definition-5-dominance-relation">Definition 5 - Dominance Relation<a class="headerlink" href="#definition-5-dominance-relation" title="Permanent link">¶</a></h5>
<p>Let <span class="arithmatex">\(v_1\)</span> and <span class="arithmatex">\(v_2\)</span> be two vertices in a graph <span class="arithmatex">\(G\)</span>. We say <span class="arithmatex">\(v_1\)</span> dominates <span class="arithmatex">\(v_2\)</span>, written as <span class="arithmatex">\(v_1 \preceq v_2\)</span>, iff for all path <span class="arithmatex">\(v_0,...,v_2\)</span> where <span class="arithmatex">\(v_0\)</span> is the source vertex, we find a prefix sequence <span class="arithmatex">\(v_0,...,v_1\)</span> in <span class="arithmatex">\(v_0,...,v_2\)</span>. </p>
<p>In other words, <span class="arithmatex">\(v_1 \preceq v_2\)</span> means whenever we execute the program from the start to location <span class="arithmatex">\(v_2\)</span>, we definitely pass through location <span class="arithmatex">\(v_1\)</span>. </p>
<p>For instance, in the earlier control flow graph for <code>Graph2_PA1</code>, </p>
<ul>
<li>the vertex <code>1</code> dominates all vertices. </li>
<li>the vertex <code>4</code> dominates itself, the vertices <code>5,6,7,8,9,10</code>.</li>
</ul>
<h5 id="lemma-1-dominance-is-transitive">Lemma 1 - Dominance is transitive<a class="headerlink" href="#lemma-1-dominance-is-transitive" title="Permanent link">¶</a></h5>
<p><span class="arithmatex">\(v_1 \preceq v_2\)</span> and <span class="arithmatex">\(v_2 \preceq v_3\)</span> implies that <span class="arithmatex">\(v_1 \preceq v_3\)</span>.</p>
<h5 id="lemma-2-dominance-is-reflexive">Lemma 2 - Dominance is reflexive<a class="headerlink" href="#lemma-2-dominance-is-reflexive" title="Permanent link">¶</a></h5>
<p>For any vertex <span class="arithmatex">\(v\)</span>, we have <span class="arithmatex">\(v \preceq v\)</span>.</p>
<h5 id="definition-6-strict-dominance">Definition 6 - Strict Dominance<a class="headerlink" href="#definition-6-strict-dominance" title="Permanent link">¶</a></h5>
<p>We say <span class="arithmatex">\(v_1\)</span> stricly domainates <span class="arithmatex">\(v_2\)</span>, written <span class="arithmatex">\(v_1 \prec v_2\)</span> iff <span class="arithmatex">\(v_1 \preceq v_2\)</span> and <span class="arithmatex">\(v_1 \neq v_2\)</span>.</p>
<h5 id="definition-7-immediate-dominator">Definition 7 - Immediate Dominator<a class="headerlink" href="#definition-7-immediate-dominator" title="Permanent link">¶</a></h5>
<p>We say <span class="arithmatex">\(v_1\)</span> is the immediate dominator of <span class="arithmatex">\(v_2\)</span>, written <span class="arithmatex">\(v_1 = idom(v_2)\)</span> iff <span class="arithmatex">\(v_1 \prec v_2\)</span> and not exists <span class="arithmatex">\(v_3\)</span> such that <span class="arithmatex">\(v_1 \prec v_3\)</span> and <span class="arithmatex">\(v_3 \prec v_2\)</span>.</p>
<p>Note that <span class="arithmatex">\(idom()\)</span> is a function, i.e. the immediate dominator of a vertex must be unique if it exists.</p>
<h5 id="dominator-tree">Dominator Tree<a class="headerlink" href="#dominator-tree" title="Permanent link">¶</a></h5>
<p>Given the <span class="arithmatex">\(idom()\)</span> function, we can construct a dominator tree from a control flow graph <span class="arithmatex">\(G\)</span>.</p>
<ul>
<li>Each vertex <span class="arithmatex">\(v \in G\)</span> forms a node in the dominator tree.</li>
<li>For vertices <span class="arithmatex">\(v_1, v_2 \in G\)</span>, <span class="arithmatex">\(v_2\)</span> is a child of <span class="arithmatex">\(v_1\)</span> if <span class="arithmatex">\(v_1 = idom(v_2)\)</span>.</li>
</ul>
<p>For example, from the CFG <code>Graph2_PA1</code>, we construct a dominator tree <code>Tree2_PA1</code>, as follows, </p>
<pre class="mermaid"><code>graph TD;
    1 --&gt; 2;
    2 --&gt; 3;
    3 --&gt; 4;
    4 --&gt; 5;
    5 --&gt; 6;
    6 --&gt; 7;
    7 --&gt; 8;
    5 --&gt; 9;
    9 --&gt; 10;</code></pre>
<p>Let <span class="arithmatex">\(T\)</span> be a dominator tree, we write <span class="arithmatex">\(child(v,T)\)</span> to denote the set of children of <span class="arithmatex">\(v\)</span> in <span class="arithmatex">\(T\)</span>.</p>
<h5 id="definition-8-dominance-frontier">Definition 8 - Dominance Frontier<a class="headerlink" href="#definition-8-dominance-frontier" title="Permanent link">¶</a></h5>
<p>Let <span class="arithmatex">\(v\)</span> be vertex in a graph <span class="arithmatex">\(G\)</span>, we define the dominance frontier of <span class="arithmatex">\(v\)</span> as
$$
df(v, G) = { v_2 \mid (v_1,v_2) \in G \wedge v \preceq v_1 \wedge \neg(v \prec v_2) }
$$</p>
<p>In other words, the dominance frontier of a vertex <span class="arithmatex">\(v\)</span> is the set of vertices that are not dominated by <span class="arithmatex">\(v\)</span> but their predecesors are (dominated by <span class="arithmatex">\(v\)</span>). </p>
<p>For instance, in our running example, the dominance frontier of  vertex <code>6</code> is the set containing vertex <code>4</code> This is because </p>
<ul>
<li>vertex <code>8</code> is one of the predecesors of the vertex <code>4</code> and </li>
<li>vertex <code>8</code> is dominated by vertex <code>6</code>, but not the vertex <code>4</code> is not domainated by vertex <code>6</code>.</li>
</ul>
<blockquote>
<p>Question: what is the dominance frontier of vertex <code>5</code>?</p>
</blockquote>
<h5 id="computing-dominance-frontier">Computing Dominance Frontier<a class="headerlink" href="#computing-dominance-frontier" title="Permanent link">¶</a></h5>
<p>The naive algorithm of computing dominance frontier of all ther vertices in a CFG takes <span class="arithmatex">\(O(n^2)\)</span> where <span class="arithmatex">\(n\)</span> is the number of vertices. </p>
<p>Cytron et al proposed a more efficient algorithm to compute the dominance frontiers of all the vertices in a CFG. </p>
<h6 id="re-definining-dominance-frontier">Re-definining Dominance Frontier<a class="headerlink" href="#re-definining-dominance-frontier" title="Permanent link">¶</a></h6>
<p>The main idea is to give a recursive definition to Dominance Frontier by making use of the dominator tree. </p>
<p>Let <span class="arithmatex">\(G\)</span> be a CFG, and <span class="arithmatex">\(T\)</span> be the dominator tree of <span class="arithmatex">\(G\)</span>. We define </p>
<div class="arithmatex">\[
df(v, G) = df_{local}(v, G) \cup \bigcup_{u \in child(v,T)} df_{up}(u, G)  ~~~(E1)
\]</div>
<p>where </p>
<div class="arithmatex">\[
df_{local}(v, G) = \{ w \mid (v,w) \in G \wedge \neg(v \prec w)\} ~~~(E2)
\]</div>
<p>and </p>
<div class="arithmatex">\[
df_{up}(v, G) = \{ w \mid w \in df(v,G) \wedge \neg (idom(v) \prec w)\}~~~(E3)
\]</div>
<ul>
<li><span class="arithmatex">\((E1)\)</span> says that the dominance frontier of a vertex <span class="arithmatex">\(v\)</span> is the union of the local contribution <span class="arithmatex">\(df_{local}(v,G)\)</span> and the (dominator tree) descendants' upward contribution <span class="arithmatex">\(\bigcup_{u \in child(v,T)} df_{up}(u, G)\)</span></li>
<li><span class="arithmatex">\((E2)\)</span> defines the local dominance frontier of a vertex <span class="arithmatex">\(v\)</span> by finding successors <span class="arithmatex">\(w\)</span> of <span class="arithmatex">\(v\)</span> (i.e. there is an edge from <span class="arithmatex">\(v\)</span> to <span class="arithmatex">\(w\)</span>) that are not dominated by <span class="arithmatex">\(v\)</span>.</li>
<li><span class="arithmatex">\((E3)\)</span> defines the upward contributed frontier of a vertex <span class="arithmatex">\(v\)</span>, by finding vertices <span class="arithmatex">\(w\)</span> in <span class="arithmatex">\(v\)</span>'s dominance frontier, such that <span class="arithmatex">\(w\)</span> is not dominated by <span class="arithmatex">\(v\)</span>'s immediate dominator (i.e. <span class="arithmatex">\(v\)</span>'s parent in the dominator tree).</li>
</ul>
<p>Cytron et al shows that <span class="arithmatex">\((E1)\)</span>  defines the same result as Definition 6.</p>
<h5 id="dominance-frontier-algorithm">Dominance frontier algorithm<a class="headerlink" href="#dominance-frontier-algorithm" title="Permanent link">¶</a></h5>
<p>As we can observe from the recursive definition, it is more efficient to compute the dominance frontiers by traversing the dominator tree "bottom-up", as we can reuse the dominance frontier of the child nodes (vertices) to compute the upward contribution of the parent node (vertex).</p>
<p>The algorithm is structured as follows</p>
<ol>
<li>For each vertex <span class="arithmatex">\(v\)</span> by traversing the dominator tree bottom up:<ol>
<li>compute <span class="arithmatex">\(df_{local}(v,G)\)</span></li>
<li>compute <span class="arithmatex">\(\bigcup_{u \in child(v,T)}df_{up}(u, G)\)</span>, which can be looked up from the a memoization table.</li>
<li>save <span class="arithmatex">\(df(v,G) = df_{local}(v,G) \cup \bigcup_{u \in child(v,T)} df_{up}(u,G)\)</span> in the memoization table.</li>
</ol>
</li>
</ol>
<p>For instance, we make use of <code>Graph2_PA1</code> and <code>Tree2_PA1</code> to construct the following memoization table <code>Table2_PA1</code></p>
<table>
<thead>
<tr>
<th>vertex/node</th>
<th>successors</th>
<th>children</th>
<th>idom</th>
<th><span class="arithmatex">\(df_{local}\)</span></th>
<th><span class="arithmatex">\(df_{up}\)</span></th>
<th>df</th>
</tr>
</thead>
<tbody>
<tr>
<td>10</td>
<td>{}</td>
<td>{}</td>
<td>9</td>
<td>{}</td>
<td>{}</td>
<td>{}</td>
</tr>
<tr>
<td>9</td>
<td>{10}</td>
<td>{10}</td>
<td>5</td>
<td>{}</td>
<td>{}</td>
<td>{}</td>
</tr>
<tr>
<td>8</td>
<td>{4}</td>
<td>{}</td>
<td>7</td>
<td>{4}</td>
<td>{4}</td>
<td>{4}</td>
</tr>
<tr>
<td>7</td>
<td>{8}</td>
<td>{8}</td>
<td>6</td>
<td>{}</td>
<td>{4}</td>
<td>{4}</td>
</tr>
<tr>
<td>6</td>
<td>{7}</td>
<td>{7}</td>
<td>5</td>
<td>{}</td>
<td>{4}</td>
<td>{4}</td>
</tr>
<tr>
<td>5</td>
<td>{6,9}</td>
<td>{6,9}</td>
<td>4</td>
<td>{}</td>
<td>{4}</td>
<td>{4}</td>
</tr>
<tr>
<td>4</td>
<td>{5}</td>
<td>{5}</td>
<td>3</td>
<td>{}</td>
<td>{}</td>
<td>{4}</td>
</tr>
<tr>
<td>3</td>
<td>{4}</td>
<td>{4}</td>
<td>2</td>
<td>{}</td>
<td>{}</td>
<td>{}</td>
</tr>
<tr>
<td>2</td>
<td>{3}</td>
<td>{3}</td>
<td>1</td>
<td>{}</td>
<td>{}</td>
<td>{}</td>
</tr>
<tr>
<td>1</td>
<td>{2}</td>
<td>{2}</td>
<td></td>
<td>{}</td>
<td>{}</td>
<td>{}</td>
</tr>
</tbody>
</table>
<p>From the above table, we conclude that variables that are updated in vertices <code>5,6,7,8</code> should be merged via phi-assignments at the entry point of vertex <code>4</code>.</p>
<blockquote>
<p>As highlighted in Cytron's paper, <span class="arithmatex">\(df_{local}(x,G)\)</span> can be defined efficiently as <span class="arithmatex">\(\{ y \mid  (x,y)\in G \wedge idom(y) \neq x \}\)</span></p>
<p>Furthermore, <span class="arithmatex">\(df_{up}(u,x,G)\)</span> can be defined efficiently as <span class="arithmatex">\(\{y \mid y \in df(u) \wedge idom(y) \neq x \}\)</span></p>
<p>Note that in Cytron's paper, they include two special vertices, <code>entry</code> the entry vertex, and <code>exit</code> as the exit, and <code>entry</code> dominates everything, and <code>exit</code> is only dominated by <code>entry</code>. The purpose is to handle langugage allowing multiple return statements.</p>
</blockquote>
<h5 id="definition-9-iterative-dominance-frontier">Definition 9 - Iterative Dominance Frontier<a class="headerlink" href="#definition-9-iterative-dominance-frontier" title="Permanent link">¶</a></h5>
<p>As pointed out by Cytron's work, if a variable <span class="arithmatex">\(x\)</span> is updated in a program location (vertex) <span class="arithmatex">\(v\)</span>, a phi-assignment for this variable must be inserted in the dominance frontier of <span class="arithmatex">\(v\)</span>. However inserting a phi assignment at the dominance frontier of <span class="arithmatex">\(v\)</span> introduces a new location of modifying the variable <span class="arithmatex">\(x\)</span>. This leads to some "cascading effect" in computing the phi-assignment locations. </p>
<p>We extend the dominance frontier to handle a set of vertices.</p>
<p>Let <span class="arithmatex">\(S\)</span> denote a set of vertices of a graph <span class="arithmatex">\(G\)</span>. We define</p>
<div class="arithmatex">\[
df(S, G) = \bigcup_{v\in S} df(v, G)
\]</div>
<p>We define the iterative dominance frontier recursively as follows</p>
<div class="arithmatex">\[
\begin{array}{l}
df_1(S, G) = df(S, G) \\
df_n(S, G) = df(S \cup df_{n-1}(S,G), G)
\end{array}
\]</div>
<p>It can be proven that there exists <span class="arithmatex">\(k \geq 1\)</span> where <span class="arithmatex">\(df_{k}(S,G) = df_{k+1}(S,G)\)</span>, i.e. the set is bounded. We use <span class="arithmatex">\(df^+(S,G)\)</span> to denote the upper bound.</p>
<p>It follows that if a variable <span class="arithmatex">\(x\)</span> is modified in locations <span class="arithmatex">\(S\)</span>, then the set of phi-assignments to be inserted for <span class="arithmatex">\(x\)</span> is <span class="arithmatex">\(df^+(S,G)\)</span>.</p>
<h3 id="ssa-construction-algorithm_1">SSA construction algorithm<a class="headerlink" href="#ssa-construction-algorithm_1" title="Permanent link">¶</a></h3>
<p>Given the control flow graph <span class="arithmatex">\(G\)</span>, the dominator tree <span class="arithmatex">\(T\)</span>, and the dominance frontier table <span class="arithmatex">\(DFT\)</span>, the SSA construction algorithm consists of two steps.</p>
<ol>
<li>insert phi assignments to the original program <span class="arithmatex">\(P\)</span>.</li>
<li>rename variables to ensure the single assignment property.</li>
</ol>
<h4 id="inserting-phi-assignments">Inserting Phi assignments<a class="headerlink" href="#inserting-phi-assignments" title="Permanent link">¶</a></h4>
<p>Before inserting the phi assignments to <span class="arithmatex">\(P\)</span>, we need some intermediate data structure. </p>
<ol>
<li>A dictionary <span class="arithmatex">\(E\)</span> that maps program labels (vertices in CFG) to a set of variables.  <span class="arithmatex">\((l, S) \in E\)</span>  implies that variables in <span class="arithmatex">\(S\)</span> having phi-assignment to be inserted at the vertex label <span class="arithmatex">\(l\)</span>. <span class="arithmatex">\(E\)</span> can be constructed from the <span class="arithmatex">\(DFT\)</span> table using the <span class="arithmatex">\(df^+(\cdot,\cdot)\)</span> operation.</li>
</ol>
<p>Input: the original program <code>P</code>, can be viewed as a list of labeled instructions.
Output: the modified program <code>Q</code>. can be viewed as a list of labeled instructions.</p>
<p>The phi-assignment insertion process can be described as follows,</p>
<ol>
<li><code>Q = List()</code></li>
<li>for each <code>l:i</code> in <code>P</code><ol>
<li>match <code>E.get(l)</code> with <ol>
<li>case <code>None</code><ol>
<li>add <code>l:i</code> to <code>Q</code></li>
</ol>
</li>
<li>case <code>Some(xs)</code><ol>
<li><code>phis = xs.map( x =&gt; x &lt;- phi( k:x | (k in pred(l,G)))</code></li>
<li>if <code>phis</code> has more than 1 operand, add <code>l:phis i</code> to <code>Q</code></li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<p><span class="arithmatex">\(pred(v, G)\)</span> retrieves the set of predecessors of vertex (label) in graph <span class="arithmatex">\(G\)</span>. </p>
<p>For example, given <code>PA1</code>,</p>
<ul>
<li>variable <span class="arithmatex">\(x\)</span> is modified at <code>1</code></li>
<li>variable <span class="arithmatex">\(s\)</span> is modified at <code>2,6</code></li>
<li>variable <span class="arithmatex">\(c\)</span> is modified at <code>3,7</code></li>
<li>variable <span class="arithmatex">\(t\)</span> is modified at <code>4</code></li>
</ul>
<p>We construct <span class="arithmatex">\(E\)</span> by consulting the dominance frontier table <code>Table2_PA1</code>.</p>
<p><div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span>
<span class="normal"><a href="#__codelineno-11-2">2</a></span>
<span class="normal"><a href="#__codelineno-11-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1"></a>E = Map(
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2"></a>    4 -&gt; Set("s","c", "t")
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3"></a>)
</span></code></pre></div></td></tr></table></div>
which says that in node/vertex <code>4</code>, we should insert the phi-assignments for variable <code>s</code> and <code>c</code>.</p>
<p>Now we apply the above algorithm to <code>PA1</code> which generates</p>
<div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-12-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-12-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-12-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-12-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-12-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-12-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-12-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-12-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-12-10">10</a></span>
<span class="normal"><a href="#__codelineno-12-11">11</a></span>
<span class="normal"><a href="#__codelineno-12-12">12</a></span>
<span class="normal"><a href="#__codelineno-12-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="c1">// PRE_SSA_PA1</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">input</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="mi">4</span><span class="p">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">phi</span><span class="p">(</span><span class="mi">3</span><span class="p">:</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">:</span><span class="n">s</span><span class="p">)</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="w">   </span><span class="n">c</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">phi</span><span class="p">(</span><span class="mi">3</span><span class="p">:</span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">:</span><span class="n">c</span><span class="p">)</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="w">   </span><span class="n">t</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">x</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8"></a><span class="mi">5</span><span class="p">:</span><span class="w"> </span><span class="n">ifn</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="mi">9</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9"></a><span class="mi">6</span><span class="p">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10"></a><span class="mi">7</span><span class="p">:</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11"></a><span class="mi">8</span><span class="p">:</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="mi">4</span>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12"></a><span class="mi">9</span><span class="p">:</span><span class="w"> </span><span class="n">rret</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">s</span><span class="w"> </span>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13"></a><span class="mi">10</span><span class="p">:</span><span class="w"> </span><span class="n">ret</span>
</span></code></pre></div></td></tr></table></div>
<p>Note that when we try to insert the phi assignment for <code>t</code> at <code>4</code>, we realize that there is only one operand. This is because <code>t</code> is not defined before label <code>4</code>. In this case we remove the phi assignment for <code>t</code>.</p>
<h4 id="renaming-variables">Renaming Variables<a class="headerlink" href="#renaming-variables" title="Permanent link">¶</a></h4>
<p>Given an intermediate output like <code>PRE_SSA_PA1</code>, we need to rename the variable so that there is only one assignment for each variable.</p>
<p>Inputs: </p>
<ul>
<li>a dictionary of stacks <code>K</code> where the keys are the variable names in the original PA program. e.g. <code>K(x)</code> returns the stack for variable <code>x</code>. </li>
<li>
<p>the input program in with phi assignment but oweing the variable renaming,  e.g. <code>PRE_SSA_PA1</code>. We view the program as a dictionary mapping labels to labeled instructions.</p>
</li>
<li>
<p>For each variable <code>x</code> in the program, initialize <code>K(x) = Stack()</code>.</p>
</li>
<li>Let label <code>l</code> be the root of the dominator tree <span class="arithmatex">\(T\)</span>.</li>
<li>Let <code>vars</code> be an empty list</li>
<li>Match <code>P(l)</code> with<ol>
<li>case <code>l: phis r &lt;- s</code><ol>
<li><code>(phis', K, result_list) = processphi(phis, K, vars)</code></li>
<li><code>s' = ren(K, s)</code></li>
<li>set <code>Q(l)</code> to <code>l: phis' r &lt;- s'</code></li>
</ol>
</li>
<li>case <code>l: phis r &lt;- s1 op s2</code><ol>
<li><code>(phis', K, result_list) = processphi(phis, K, vars)</code></li>
<li><code>s1' = ren(K, s1)</code></li>
<li><code>s2' = ren(K, s2)</code></li>
<li>set <code>Q(l)</code> to  <code>l: phis' r &lt;- s1' op s2'</code></li>
</ol>
</li>
<li>case <code>l: phis x &lt;- s</code><ol>
<li><code>(phis', K, result_list) = processphi(phis, K, vars)</code></li>
<li><code>s' = ren(K, s)</code></li>
<li><code>i = next(K,x)</code></li>
<li>append <code>x</code> to <code>vars</code></li>
<li>set <code>Q(l)</code> to <code>l: phis' x_i &lt;- s'</code></li>
</ol>
</li>
<li>case <code>l: phis x &lt;- s1 op s2</code><ol>
<li><code>(phis', K, result_list) = processphi(phis, K, vars)</code></li>
<li><code>s1' = ren(K, s1)</code></li>
<li><code>s2' = ren(K, s2)</code></li>
<li><code>i = next(K,x)</code></li>
<li>append <code>x</code> to <code>vars</code></li>
<li>set <code>Q(l)</code> to  <code>l: phis' x_i &lt;- s1' op s2'</code></li>
</ol>
</li>
<li>case <code>l: phis ifn t goto l'</code> <ol>
<li><code>(phis', K, result_list) = processphi(phis, K, vars)</code></li>
<li><code>t' = ren(K, t)</code></li>
<li>set <code>Q(l)</code> to  <code>l: phis' ifn t' goto l'</code> </li>
</ol>
</li>
<li>case <code>l: phis ret</code><ol>
<li><code>(phis', K, result_list) = processphi(phis, K, vars)</code></li>
<li>set <code>Q(l)</code> to <code>l: phis' ret</code></li>
</ol>
</li>
<li>case <code>l: phis goto l'</code><ol>
<li><code>(phis', K, result_list) = processphi(phis, K, vars)</code></li>
<li>set <code>Q(l)</code> to <code>l: phis' goto l'</code></li>
</ol>
</li>
</ol>
</li>
<li>For each successor <code>k</code> of <code>l</code> in the CFG <span class="arithmatex">\(G\)</span><ol>
<li><code>R = if k in Q { Q } else { R }</code></li>
<li>Pattern match <code>R(k)</code> <ol>
<li>case <code>k: phis i</code><ol>
<li>for each <code>x &lt;- phi(j:x', m:x'')</code> in <code>phis</code><ol>
<li>if <code>K(origin(x))</code> is empty, do not add this phi assignment in the result list**.</li>
<li>if <code>j == l</code>, <code>x &lt;- phi(j:ren(K,x'), m:x'')</code> into the result list</li>
<li>if <code>m == l</code>, <code>x &lt;- phi(j:x', m:ren(K,x''))</code> into the result list</li>
</ol>
</li>
<li>the result list is <code>phis'</code></li>
<li>update <code>R(k)</code> to  <code>k: phis' i</code> </li>
</ol>
</li>
<li>case <code>others</code>, no change</li>
</ol>
</li>
</ol>
</li>
<li>Recursively apply step 3 to the children of <code>l</code> in the <span class="arithmatex">\(T\)</span>.</li>
<li>For each <code>x</code> in <code>vars</code>, <code>K(x).pop()</code></li>
</ul>
<p>Where <code>ren(K, s)</code> is defined as         </p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1">1</a></span>
<span class="normal"><a href="#__codelineno-13-2">2</a></span>
<span class="normal"><a href="#__codelineno-13-3">3</a></span>
<span class="normal"><a href="#__codelineno-13-4">4</a></span>
<span class="normal"><a href="#__codelineno-13-5">5</a></span>
<span class="normal"><a href="#__codelineno-13-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1"></a>ren(K,c) = c
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2"></a>ren(K, input) = input
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3"></a>ren(K, r) = r
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4"></a>ren(K, t) = K(t).peek() match 
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5"></a>    case None =&gt; error("variable use before being defined.")
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6"></a>    case Some(i) =&gt; t_i
</span></code></pre></div></td></tr></table></div>
<p>and <code>next(K, x)</code> is defined as </p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1">1</a></span>
<span class="normal"><a href="#__codelineno-14-2">2</a></span>
<span class="normal"><a href="#__codelineno-14-3">3</a></span>
<span class="normal"><a href="#__codelineno-14-4">4</a></span>
<span class="normal"><a href="#__codelineno-14-5">5</a></span>
<span class="normal"><a href="#__codelineno-14-6">6</a></span>
<span class="normal"><a href="#__codelineno-14-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1"></a>next(K, x) = K(x).peek() match 
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2"></a>    case None =&gt; 
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3"></a>        K(x).push(1)
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4"></a>        0
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5"></a>    case Some(i) =&gt;
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6"></a>        K(x).push(i+1)
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7"></a>        i
</span></code></pre></div></td></tr></table></div>
<p>and <code>processphi(phis, K)</code> is defined as 
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1">1</a></span>
<span class="normal"><a href="#__codelineno-15-2">2</a></span>
<span class="normal"><a href="#__codelineno-15-3">3</a></span>
<span class="normal"><a href="#__codelineno-15-4">4</a></span>
<span class="normal"><a href="#__codelineno-15-5">5</a></span>
<span class="normal"><a href="#__codelineno-15-6">6</a></span>
<span class="normal"><a href="#__codelineno-15-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1"></a>prcessphi(phis, K, vars) = 
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2"></a>    foreach x &lt;- phi(j:x', k:x'') in phis
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3"></a>        i = K(x).peek() + 1
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4"></a>        K(x).push(i)
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5"></a>        append x to vars
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6"></a>        put x_i &lt;- phi(j:x', k:x'') into result_list
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7"></a>    return (result_list, K, vars)
</span></code></pre></div></td></tr></table></div></p>
<p>and <code>stem(x)</code> returns the original version of <code>x</code> before renaming, e.g. <code>stem(x) = x</code> and <code>stem(x1) = x</code>. We assume there exists some book-keeping mechanism to keep track of that the fact that <code>x</code> is the origin form of <code>x_1</code>.</p>
<blockquote>
<p>Note on **: In Cytron's paper, all variables must be initialized in the starting vertex of the program. This is not the case in our context. A temp variable can be created to handle nested binary operation, it is might not be initialized. This can be fixed by skipping any phi-assignment of which one of the preceding branch has no such variable assigned. This is sound as this would means 
* The phi-assignment is not needed, in case of while statement where the variable is introduced in the while body, or 
* The phi-assignment is not fully initialized, in case of if-else where the variable is only introduced in one of the branch.</p>
</blockquote>
<p>We describe the application of the algorithm to <code>PRE_SSA_PA1</code> (with the dominator tree <code>Tree2_PA1</code> and CFG <code>Graph1_PA1</code>) with the following table.</p>
<table>
<thead>
<tr>
<th>label</th>
<th>P(l)</th>
<th>Q(l)</th>
<th>K</th>
<th>P(succ(l))</th>
<th>Q(succ(l))</th>
<th>vars</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><code>1:x&lt;-input</code></td>
<td><code>1:x0&lt;-input</code></td>
<td><code>{x:[0], s:[], c:[], t:[]}</code></td>
<td></td>
<td></td>
<td><code>{1:{x}}</code></td>
</tr>
<tr>
<td>2</td>
<td><code>2:s&lt;-0</code></td>
<td><code>2:s0&lt;-0</code></td>
<td><code>{x:[0], s:[0], c:[], t:[]}</code></td>
<td></td>
<td></td>
<td><code>{1:{x}, 2:{s}}</code></td>
</tr>
<tr>
<td>3</td>
<td><code>3:c&lt;-0</code></td>
<td><code>3:c0&lt;-0</code></td>
<td><code>{x:[0], s:[0], c:[0], t:[]}</code></td>
<td><code>4:s&lt;-phi(3:s0,8:s);c&lt;-phi(3:c0,8:c);t&lt;-c&lt;x</code></td>
<td></td>
<td><code>{1:{x}, 2:{s}. 3:{c}}</code></td>
</tr>
<tr>
<td>4</td>
<td><code>4:s&lt;-phi(3:s0,8:s);c&lt;-phi(3:c0,8:c);t&lt;-c&lt;x</code></td>
<td><code>4:s1&lt;-phi(3:s0,8:s);c1&lt;-phi(3:c0,8:c);t0&lt;-c1&lt;x0</code></td>
<td><code>{x:[0], s:[0,1], c:[0,1], t:[0]}</code></td>
<td></td>
<td></td>
<td><code>{1:{x}, 2:{s}. 3:{c}, 4:{s,c,t}}</code></td>
</tr>
<tr>
<td>5</td>
<td><code>5:ifn t goto 9</code></td>
<td><code>5:ifn t0 goto 9</code></td>
<td><code>{x:[0], s:[0,1], c:[0,1], t:[0]}</code></td>
<td></td>
<td></td>
<td><code>{1:{x}, 2:{s}. 3:{c}, 4:{s,c,t}}</code></td>
</tr>
<tr>
<td>6</td>
<td><code>6:s&lt;-c+s</code></td>
<td><code>6:s2&lt;-c1+s1</code></td>
<td><code>{x:[0], s:[0,1,2], c:[0,1], t:[0]}</code></td>
<td></td>
<td></td>
<td><code>{1:{x}, 2:{s}. 3:{c}, 4:{s,c,t}, 6:{s}}</code></td>
</tr>
<tr>
<td>7</td>
<td><code>7:c&lt;-c+1</code></td>
<td><code>7:c2&lt;-c1+1</code></td>
<td><code>{x:[0], s:[0,1,2], c:[0,1,2], t:[0]}</code></td>
<td></td>
<td></td>
<td><code>{1:{x}, 2:{s}. 3:{c}, 4:{s,c,t}, 6:{s}, 7:{c}}</code></td>
</tr>
<tr>
<td>8</td>
<td><code>8:goto 4</code></td>
<td><code>8:goto 4</code></td>
<td><code>{x:[0], s:[0,1,2], c:[0,1,2], t:[0]}</code></td>
<td></td>
<td></td>
<td><code>4:s1&lt;-phi(3:s0,8:s2);c1&lt;-phi(3:c0,8:c2);t0&lt;-c1&lt;x0</code></td>
</tr>
<tr>
<td>9</td>
<td><code>9:rret&lt;-s</code></td>
<td><code>9:rret&lt;-s1</code></td>
<td><code>{x:[0], s:[0,1], c:[0,1], t:[0]}</code></td>
<td></td>
<td></td>
<td><code>{1:{x}, 2:{s}. 3:{c}, 4:{s,c,t}}</code></td>
</tr>
<tr>
<td>10</td>
<td><code>10:ret</code></td>
<td><code>10:ret</code></td>
<td><code>{x:[0], s:[0,1], c:[0,1], t:[0]}</code></td>
<td></td>
<td></td>
<td><code>{1:{x}, 2:{s}. 3:{c}, 4:{s,c,t}}</code></td>
</tr>
</tbody>
</table>
<ul>
<li>The label column denotes the current label  being considered.</li>
<li>The P(l) column denotes the input labeled instruction being considered.</li>
<li>The Q(l) column denotes the output labeled instruction.</li>
<li>The K column denotes the set of stacks after the current recursive call.</li>
<li>The P(succ(l)) column denotes the modified successor intruction in P, (this applies only when the instruction is not yet available in Q)</li>
<li>The Q(succ(l)) column denotes the modified successor instruction in Q.</li>
<li>The vars column denotes a mapping of recursive call (indexed by the current label) to the set of variables' ids have been generated (which require popping at the end of the recursive call).</li>
</ul>
<p>The above derivation eventually yield <code>SSA_PA1</code>.</p>
<p>Note that in case of a variable being use before initialized, <code>ren(K, t)</code> will raise an error. </p>
<h4 id="ssa-back-to-pseudo-assembly">SSA back to Pseudo Assembly<a class="headerlink" href="#ssa-back-to-pseudo-assembly" title="Permanent link">¶</a></h4>
<p>To convert a SSA back to Pseudo Assembly, we have to "resolve" the phi-assignments to by moving the branch-dependent assignment back to the preceding labeled instruction. For instance, translating <code>SSA_PA1</code> back to PA while keeping the renamed variables, we have </p>
<div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-16-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-16-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-16-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-16-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-16-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-16-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-16-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-16-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-16-10">10</a></span>
<span class="normal"><a href="#__codelineno-16-11">11</a></span>
<span class="normal"><a href="#__codelineno-16-12">12</a></span>
<span class="normal"><a href="#__codelineno-16-13">13</a></span>
<span class="normal"><a href="#__codelineno-16-14">14</a></span>
<span class="normal"><a href="#__codelineno-16-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="c1">// PA2</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="n">x0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">input</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="n">s0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="n">c0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">s0</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c0</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="mi">4</span><span class="p">:</span><span class="w"> </span><span class="n">t0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">x0</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="mi">5</span><span class="p">:</span><span class="w"> </span><span class="n">ifn</span><span class="w"> </span><span class="n">t0</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="mi">9</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="mi">6</span><span class="p">:</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s1</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="mi">7</span><span class="p">:</span><span class="w"> </span><span class="n">c2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11"></a><span class="mi">8</span><span class="p">:</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">s2</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12"></a><span class="mi">8</span><span class="p">:</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c2</span>
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13"></a><span class="mi">8</span><span class="p">:</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="mi">4</span>
</span><span id="__span-16-14"><a id="__codelineno-16-14" name="__codelineno-16-14"></a><span class="mi">9</span><span class="p">:</span><span class="w"> </span><span class="n">rret</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span>
</span><span id="__span-16-15"><a id="__codelineno-16-15" name="__codelineno-16-15"></a><span class="mi">10</span><span class="p">:</span><span class="w"> </span><span class="n">ret</span>
</span></code></pre></div></td></tr></table></div>
<p>In the above we break the phi-assignments found in </p>
<div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1">1</a></span>
<span class="normal"><a href="#__codelineno-17-2">2</a></span>
<span class="normal"><a href="#__codelineno-17-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="mi">4</span><span class="p">:</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">phi</span><span class="p">(</span><span class="mi">3</span><span class="p">:</span><span class="n">s0</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">:</span><span class="n">s2</span><span class="p">)</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="w">   </span><span class="n">c1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">phi</span><span class="p">(</span><span class="mi">3</span><span class="p">:</span><span class="n">c0</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">:</span><span class="n">c2</span><span class="p">)</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="w">   </span><span class="n">t0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">x0</span>
</span></code></pre></div></td></tr></table></div>
<p>into </p>
<p><code>PhiFor3</code>
<div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1">1</a></span>
<span class="normal"><a href="#__codelineno-18-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="n">s1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">s0</span><span class="w"> </span><span class="c1">// for label 3</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="n">c1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c0</span>
</span></code></pre></div></td></tr></table></div></p>
<p>and </p>
<p><code>PhiFor8</code>
<div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1">1</a></span>
<span class="normal"><a href="#__codelineno-19-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="n">s1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="c1">// for label 8</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="n">c1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c2</span>
</span></code></pre></div></td></tr></table></div></p>
<p>We move <code>PhiFor3</code> to label 3</p>
<div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1">1</a></span>
<span class="normal"><a href="#__codelineno-20-2">2</a></span>
<span class="normal"><a href="#__codelineno-20-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="mi">3</span><span class="p">:</span><span class="w">  </span><span class="n">c0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="mi">3</span><span class="p">:</span><span class="w">  </span><span class="n">s1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">s0</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="mi">3</span><span class="p">:</span><span class="w">  </span><span class="n">c1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c0</span>
</span></code></pre></div></td></tr></table></div>
<p>and <code>PhiFor8</code> to label 8</p>
<div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1">1</a></span>
<span class="normal"><a href="#__codelineno-21-2">2</a></span>
<span class="normal"><a href="#__codelineno-21-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="mi">8</span><span class="p">:</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">s2</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="mi">8</span><span class="p">:</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c2</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="mi">8</span><span class="p">:</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="mi">4</span>
</span></code></pre></div></td></tr></table></div>
<p>The "moving" phi-assignment operation can be defined in the following algorithm.</p>
<h5 id="relocating-the-phi-assignments">Relocating the phi-assignments<a class="headerlink" href="#relocating-the-phi-assignments" title="Permanent link">¶</a></h5>
<p>Input: a PA program <span class="arithmatex">\(P\)</span> being viewed as a list of labeled instructions.
Output: a PA program <span class="arithmatex">\(Q\)</span> being viewed as a list of labeled instructions. (duplicate labels are allowed in <span class="arithmatex">\(Q\)</span>)</p>
<ol>
<li>For each <span class="arithmatex">\(l: \overline{\phi}\ i \in P\)</span>, append <span class="arithmatex">\(l: i\)</span> to <span class="arithmatex">\(Q\)</span>.</li>
<li>For each <span class="arithmatex">\(l: \overline{\phi}\ i\)</span>.<ol>
<li>For each <code>x = phi(l1:x1, l2:x2)</code> in <span class="arithmatex">\(\overline{\phi}\)</span><ol>
<li>append <code>l1:x &lt;- x1</code> and <code>l2:x &lt;- x2</code> to <span class="arithmatex">\(Q\)</span>.</li>
<li>note that the relocated assignment must be placed before the control flow transition from <code>l1</code> to <code>succ(l1)</code> (and <code>l2</code> to <code>succ(l2)</code>) </li>
</ol>
</li>
</ol>
</li>
<li>Sort <span class="arithmatex">\(Q\)</span> by labels using a stable sorting algorithm.</li>
</ol>
<p>Now since there are repeated labels in <code>PA2</code>, we need an extra relabelling step to convert <code>PA2</code> to <code>PA3</code></p>
<div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-22-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-22-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-22-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-22-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-22-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-22-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-22-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-22-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-22-10">10</a></span>
<span class="normal"><a href="#__codelineno-22-11">11</a></span>
<span class="normal"><a href="#__codelineno-22-12">12</a></span>
<span class="normal"><a href="#__codelineno-22-13">13</a></span>
<span class="normal"><a href="#__codelineno-22-14">14</a></span>
<span class="normal"><a href="#__codelineno-22-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="c1">// PA3</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="n">x0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">input</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="n">s0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="n">c0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="mi">4</span><span class="p">:</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">s0</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="mi">5</span><span class="p">:</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c0</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="mi">6</span><span class="p">:</span><span class="w"> </span><span class="n">t0</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">x0</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8"></a><span class="mi">7</span><span class="p">:</span><span class="w"> </span><span class="n">ifn</span><span class="w"> </span><span class="n">t0</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="mi">13</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9"></a><span class="mi">8</span><span class="p">:</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s1</span>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10"></a><span class="mi">9</span><span class="p">:</span><span class="w"> </span><span class="n">c2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11"></a><span class="mi">10</span><span class="p">:</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">s2</span>
</span><span id="__span-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12"></a><span class="mi">11</span><span class="p">:</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">c2</span>
</span><span id="__span-22-13"><a id="__codelineno-22-13" name="__codelineno-22-13"></a><span class="mi">12</span><span class="p">:</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="mi">6</span>
</span><span id="__span-22-14"><a id="__codelineno-22-14" name="__codelineno-22-14"></a><span class="mi">13</span><span class="p">:</span><span class="w"> </span><span class="n">rret</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span>
</span><span id="__span-22-15"><a id="__codelineno-22-15" name="__codelineno-22-15"></a><span class="mi">14</span><span class="p">:</span><span class="w"> </span><span class="n">ret</span>
</span></code></pre></div></td></tr></table></div>
<h5 id="relabelling">Relabelling<a class="headerlink" href="#relabelling" title="Permanent link">¶</a></h5>
<p>This re-labeling step can be described in the following algorithm.</p>
<p>Input: a PA program <span class="arithmatex">\(P\)</span> being viewed as a list of labeled instructions. (duplicate labels are allowed in <span class="arithmatex">\(P\)</span>)
Output: a PA program <span class="arithmatex">\(Q\)</span> being viewed as a list of labeled instructions.</p>
<ol>
<li>Initialize a counter <code>c = 1</code>,</li>
<li>Initialize a mapping from old label to new label, <code>M = Map()</code>.</li>
<li>Initialize <span class="arithmatex">\(Q\)</span> as an empty list</li>
<li>For each <code>l: i</code> <span class="arithmatex">\(\in P\)</span><ol>
<li><code>M = M + (l -&gt; c)</code></li>
<li>incremeant <code>c</code> by 1</li>
</ol>
</li>
<li>For each <code>l: i</code> <span class="arithmatex">\(\in P\)</span><ol>
<li>append <code>M(l): relabel(i, M)</code> to <span class="arithmatex">\(Q\)</span></li>
</ol>
</li>
</ol>
<p>where <code>relabel(i, M)</code> is defined as follows</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1">1</a></span>
<span class="normal"><a href="#__codelineno-23-2">2</a></span>
<span class="normal"><a href="#__codelineno-23-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1"></a>relabel(ifn t goto l,M) = ifn t goto M(l)
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2"></a>relabel(goto l, M) = goto M(l)
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3"></a>relabel(i, M) = i
</span></code></pre></div></td></tr></table></div>
<h2 id="structured-ssa">Structured SSA<a class="headerlink" href="#structured-ssa" title="Permanent link">¶</a></h2>
<p>Besides unstructured SSA, it is possible to construct SSA based on a structured program such as SSA. For instance, </p>
<div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1">1</a></span>
<span class="normal"><a href="#__codelineno-24-2">2</a></span>
<span class="normal"><a href="#__codelineno-24-3">3</a></span>
<span class="normal"><a href="#__codelineno-24-4">4</a></span>
<span class="normal"><a href="#__codelineno-24-5">5</a></span>
<span class="normal"><a href="#__codelineno-24-6">6</a></span>
<span class="normal"><a href="#__codelineno-24-7">7</a></span>
<span class="normal"><a href="#__codelineno-24-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">input</span><span class="p">;</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="k">while</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5"></a><span class="w">    </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s</span><span class="p">;</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6"></a><span class="w">    </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7"></a><span class="p">}</span>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8"></a><span class="k">return</span><span class="w"> </span><span class="n">s</span><span class="p">;</span>
</span></code></pre></div></td></tr></table></div>
<p>Can be converted into a structured SSA </p>
<div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1">1</a></span>
<span class="normal"><a href="#__codelineno-25-2">2</a></span>
<span class="normal"><a href="#__codelineno-25-3">3</a></span>
<span class="normal"><a href="#__codelineno-25-4">4</a></span>
<span class="normal"><a href="#__codelineno-25-5">5</a></span>
<span class="normal"><a href="#__codelineno-25-6">6</a></span>
<span class="normal"><a href="#__codelineno-25-7">7</a></span>
<span class="normal"><a href="#__codelineno-25-8">8</a></span>
<span class="normal"><a href="#__codelineno-25-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="n">x1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">input</span><span class="p">;</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="n">c1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4"></a><span class="n">join</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">phi</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span><span class="n">s3</span><span class="p">);</span><span class="w"> </span><span class="n">c2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">phi</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span><span class="n">c3</span><span class="p">);</span><span class="w"> </span><span class="p">}</span><span class="w"> </span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5"></a><span class="k">while</span><span class="w"> </span><span class="n">c2</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">x1</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6"></a><span class="w">    </span><span class="n">s3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s2</span><span class="p">;</span>
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7"></a><span class="w">    </span><span class="n">c3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-25-8"><a id="__codelineno-25-8" name="__codelineno-25-8"></a><span class="p">}</span>
</span><span id="__span-25-9"><a id="__codelineno-25-9" name="__codelineno-25-9"></a><span class="k">return</span><span class="w"> </span><span class="n">s2</span><span class="p">;</span>
</span></code></pre></div></td></tr></table></div>
<p>In the above SSA form, we have a <code>join ... while ...</code> loop. 
The join clause encloses the phi assignments merging variable definitions coming from the statement preceding the join while loop and 
also the body of the loop.  (Similarly we can introduce a <code>if ... else ... join ...</code> statement).</p>
<p>Structured SSA allows us to </p>
<ol>
<li>conduct name analysis closer to the source language. </li>
<li>
<p>conduct flow insensitive analysis by incorporating the use-def information. In some cases we get same precision as the flow sensitive analysis. </p>
</li>
<li>
<p>perform code obfuscation. </p>
</li>
</ol>
<h3 id="futher-readings">Futher Readings<a class="headerlink" href="#futher-readings" title="Permanent link">¶</a></h3>
<ul>
<li>https://dl.acm.org/doi/10.1145/2955811.2955813</li>
<li>https://dl.acm.org/doi/abs/10.1145/3605156.3606457</li>
<li>https://dl.acm.org/doi/10.1145/202530.202532</li>
</ul>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": ["content.code.annotate", "content.code.copy", "navigation.expand", "navigation.indexes", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../assets/javascripts/bundle.1e8ae164.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</body>
</html>