
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Notes for SUTD's CDPA 50.054" name="description"/>
<meta content="Kenny Lu" name="author"/>
<link href="../fp_applicative_monad/" rel="prev"/>
<link href="../syntax_analysis_parser_combinator/" rel="next"/>
<link href="../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.5.3, mkdocs-material-9.5.17" name="generator"/>
<title>Syntax Analysis - Compiler Design and Program Analysis 50.054</title>
<link href="../assets/stylesheets/main.bcfcd587.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<style>:root{--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.5 1.75v11.5c0 .138.112.25.25.25h3.17a.75.75 0 0 1 0 1.5H2.75A1.75 1.75 0 0 1 1 13.25V1.75C1 .784 1.784 0 2.75 0h8.5C12.216 0 13 .784 13 1.75v7.736a.75.75 0 0 1-1.5 0V1.75a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25Zm13.274 9.537v-.001l-4.557 4.45a.75.75 0 0 1-1.055-.008l-1.943-1.95a.75.75 0 0 1 1.062-1.058l1.419 1.425 4.026-3.932a.75.75 0 1 1 1.048 1.074ZM4.75 4h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM4 7.75A.75.75 0 0 1 4.75 7h2a.75.75 0 0 1 0 1.5h-2A.75.75 0 0 1 4 7.75Z"/></svg>');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4.72.22a.75.75 0 0 1 1.06 0l1 .999a3.488 3.488 0 0 1 2.441 0l.999-1a.748.748 0 0 1 1.265.332.75.75 0 0 1-.205.729l-.775.776c.616.63.995 1.493.995 2.444v.327c0 .1-.009.197-.025.292.408.14.764.392 1.029.722l1.968-.787a.75.75 0 0 1 .556 1.392L13 7.258V9h2.25a.75.75 0 0 1 0 1.5H13v.5c0 .409-.049.806-.141 1.186l2.17.868a.75.75 0 0 1-.557 1.392l-2.184-.873A4.997 4.997 0 0 1 8 16a4.997 4.997 0 0 1-4.288-2.427l-2.183.873a.75.75 0 0 1-.558-1.392l2.17-.868A5.036 5.036 0 0 1 3 11v-.5H.75a.75.75 0 0 1 0-1.5H3V7.258L.971 6.446a.75.75 0 0 1 .558-1.392l1.967.787c.265-.33.62-.583 1.03-.722a1.677 1.677 0 0 1-.026-.292V4.5c0-.951.38-1.814.995-2.444L4.72 1.28a.75.75 0 0 1 0-1.06Zm.53 6.28a.75.75 0 0 0-.75.75V11a3.5 3.5 0 1 0 7 0V7.25a.75.75 0 0 0-.75-.75ZM6.173 5h3.654A.172.172 0 0 0 10 4.827V4.5a2 2 0 1 0-4 0v.327c0 .096.077.173.173.173Z"/></svg>');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M9.504.43a1.516 1.516 0 0 1 2.437 1.713L10.415 5.5h2.123c1.57 0 2.346 1.909 1.22 3.004l-7.34 7.142a1.249 1.249 0 0 1-.871.354h-.302a1.25 1.25 0 0 1-1.157-1.723L5.633 10.5H3.462c-1.57 0-2.346-1.909-1.22-3.004L9.503.429Zm1.047 1.074L3.286 8.571A.25.25 0 0 0 3.462 9H6.75a.75.75 0 0 1 .694 1.034l-1.713 4.188 6.982-6.793A.25.25 0 0 0 12.538 7H9.25a.75.75 0 0 1-.683-1.06l2.008-4.418.003-.006a.036.036 0 0 0-.004-.009l-.006-.006-.008-.001c-.003 0-.006.002-.009.004Z"/></svg>');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M5 5.782V2.5h-.25a.75.75 0 0 1 0-1.5h6.5a.75.75 0 0 1 0 1.5H11v3.282l3.666 5.76C15.619 13.04 14.543 15 12.767 15H3.233c-1.776 0-2.852-1.96-1.899-3.458Zm-2.4 6.565a.75.75 0 0 0 .633 1.153h9.534a.75.75 0 0 0 .633-1.153L12.225 10.5h-8.45ZM9.5 2.5h-3V6c0 .143-.04.283-.117.403L4.73 9h6.54L9.617 6.403A.746.746 0 0 1 9.5 6Z"/></svg>');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.344 2.343h-.001a8 8 0 0 1 11.314 11.314A8.002 8.002 0 0 1 .234 10.089a8 8 0 0 1 2.11-7.746Zm1.06 10.253a6.5 6.5 0 1 0 9.108-9.275 6.5 6.5 0 0 0-9.108 9.275ZM6.03 4.97 8 6.94l1.97-1.97a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l1.97 1.97a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-1.97 1.97a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L6.94 8 4.97 6.03a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018Z"/></svg>');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"/></svg>');--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.752 1.752 0 0 1 1 7.775Zm1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25ZM6 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z"/></svg>');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"/></svg>');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M3.499.75a.75.75 0 0 1 1.5 0v.996C5.9 2.903 6.793 3.65 7.662 4.376l.24.202c-.036-.694.055-1.422.426-2.163C9.1.873 10.794-.045 12.622.26 14.408.558 16 1.94 16 4.25c0 1.278-.954 2.575-2.44 2.734l.146.508.065.22c.203.701.412 1.455.476 2.226.142 1.707-.4 3.03-1.487 3.898C11.714 14.671 10.27 15 8.75 15h-6a.75.75 0 0 1 0-1.5h1.376a4.484 4.484 0 0 1-.563-1.191 3.835 3.835 0 0 1-.05-2.063 4.647 4.647 0 0 1-2.025-.293.75.75 0 0 1 .525-1.406c1.357.507 2.376-.006 2.698-.318l.009-.01a.747.747 0 0 1 1.06 0 .748.748 0 0 1-.012 1.074c-.912.92-.992 1.835-.768 2.586.221.74.745 1.337 1.196 1.621H8.75c1.343 0 2.398-.296 3.074-.836.635-.507 1.036-1.31.928-2.602-.05-.603-.216-1.224-.422-1.93l-.064-.221c-.12-.407-.246-.84-.353-1.29a2.425 2.425 0 0 1-.507-.441 3.075 3.075 0 0 1-.633-1.248.75.75 0 0 1 1.455-.364c.046.185.144.436.31.627.146.168.353.305.712.305.738 0 1.25-.615 1.25-1.25 0-1.47-.95-2.315-2.123-2.51-1.172-.196-2.227.387-2.706 1.345-.46.92-.27 1.774.019 3.062l.042.19a.884.884 0 0 1 .01.05c.348.443.666.949.94 1.553a.75.75 0 1 1-1.365.62c-.553-1.217-1.32-1.94-2.3-2.768L6.7 5.527c-.814-.68-1.75-1.462-2.692-2.619a3.737 3.737 0 0 0-1.023.88c-.406.495-.663 1.036-.722 1.508.116.122.306.21.591.239.388.038.797-.06 1.032-.19a.75.75 0 0 1 .728 1.31c-.515.287-1.23.439-1.906.373-.682-.067-1.473-.38-1.879-1.193L.75 5.677V5.5c0-.984.48-1.94 1.077-2.664.46-.559 1.05-1.055 1.673-1.353V.75Z"/></svg>');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.92 6.085h.001a.749.749 0 1 1-1.342-.67c.169-.339.436-.701.849-.977C6.845 4.16 7.369 4 8 4a2.756 2.756 0 0 1 1.637.525c.503.377.863.965.863 1.725 0 .448-.115.83-.329 1.15-.205.307-.47.513-.692.662-.109.072-.22.138-.313.195l-.006.004a6.24 6.24 0 0 0-.26.16.952.952 0 0 0-.276.245.75.75 0 0 1-1.248-.832c.184-.264.42-.489.692-.661.103-.067.207-.132.313-.195l.007-.004c.1-.061.182-.11.258-.161a.969.969 0 0 0 .277-.245C8.96 6.514 9 6.427 9 6.25a.612.612 0 0 0-.262-.525A1.27 1.27 0 0 0 8 5.5c-.369 0-.595.09-.74.187a1.01 1.01 0 0 0-.34.398ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg>');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1.75 2.5h10.5a.75.75 0 0 1 0 1.5H1.75a.75.75 0 0 1 0-1.5Zm4 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5Zm0 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5ZM2.5 7.75v6a.75.75 0 0 1-1.5 0v-6a.75.75 0 0 1 1.5 0Z"/></svg>');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg>');}</style>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CSpline+Sans+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Spline Sans Mono"}</style>
<script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#50054-syntax-analysis">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Compiler Design and Program Analysis 50.054" class="md-header__button md-logo" data-md-component="logo" href=".." title="Compiler Design and Program Analysis 50.054">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 3a2 2 0 0 1 2-2h9.982a2 2 0 0 1 1.414.586l4.018 4.018A2 2 0 0 1 21 7.018V21a2 2 0 0 1-2 2H4.75a.75.75 0 0 1 0-1.5H19a.5.5 0 0 0 .5-.5V8.5h-4a2 2 0 0 1-2-2v-4H5a.5.5 0 0 0-.5.5v6.25a.75.75 0 0 1-1.5 0Zm12-.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 0-.146-.336l-4.018-4.018A.5.5 0 0 0 15 2.5Z"></path><path d="M4.53 12.24a.75.75 0 0 1-.039 1.06l-2.639 2.45 2.64 2.45a.75.75 0 1 1-1.022 1.1l-3.23-3a.75.75 0 0 1 0-1.1l3.23-3a.75.75 0 0 1 1.06.04Zm3.979 1.06a.75.75 0 1 1 1.02-1.1l3.231 3a.75.75 0 0 1 0 1.1l-3.23 3a.75.75 0 1 1-1.021-1.1l2.639-2.45-2.64-2.45Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Compiler Design and Program Analysis 50.054
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Syntax Analysis
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="indigo" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg>
</label>
</form>
<script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<a aria-label="Share" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1" title="Share">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"></path></svg>
</a>
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/50054-cdpa/notes" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    50054-cdpa
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../handout/">
        
  
    
  
  Handout

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../schedule/">
        
  
    
  
  Schedule

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../introduction/">
          
  
    
  
  W1

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../fp_scala/">
          
  
    
  
  W2

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../fp_scala_poly/">
          
  
    
  
  W3

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../fp_applicative_monad/">
          
  
    
  
  W4

        </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="./">
          
  
    
  
  W5

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../syntax_analysis_parser_combinator/">
          
  
    
  
  W6

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../semantic_analysis/">
          
  
    
  
  W8

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../static_semantics/">
          
  
    
  
  W9

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../name_analysis/">
          
  
    
  
  W10

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../sign_analysis_lattice/">
          
  
    
  
  W11

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../code_generation/">
          
  
    
  
  W12

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../memory_management/">
          
  
    
  
  W13

        </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Compiler Design and Program Analysis 50.054" class="md-nav__button md-logo" data-md-component="logo" href=".." title="Compiler Design and Program Analysis 50.054">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 3a2 2 0 0 1 2-2h9.982a2 2 0 0 1 1.414.586l4.018 4.018A2 2 0 0 1 21 7.018V21a2 2 0 0 1-2 2H4.75a.75.75 0 0 1 0-1.5H19a.5.5 0 0 0 .5-.5V8.5h-4a2 2 0 0 1-2-2v-4H5a.5.5 0 0 0-.5.5v6.25a.75.75 0 0 1-1.5 0Zm12-.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 0-.146-.336l-4.018-4.018A.5.5 0 0 0 15 2.5Z"></path><path d="M4.53 12.24a.75.75 0 0 1-.039 1.06l-2.639 2.45 2.64 2.45a.75.75 0 1 1-1.022 1.1l-3.23-3a.75.75 0 0 1 0-1.1l3.23-3a.75.75 0 0 1 1.06.04Zm3.979 1.06a.75.75 0 1 1 1.02-1.1l3.231 3a.75.75 0 0 1 0 1.1l-3.23 3a.75.75 0 1 1-1.021-1.1l2.639-2.45-2.64-2.45Z"></path></svg>
</a>
    Compiler Design and Program Analysis 50.054
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/50054-cdpa/notes" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    50054-cdpa
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../handout/">
<span class="md-ellipsis">
    Handout
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../schedule/">
<span class="md-ellipsis">
    Schedule
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    W1
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            W1
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../introduction/">
<span class="md-ellipsis">
    Intro
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../fp_intro/">
<span class="md-ellipsis">
    FP Intro
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    W2
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            W2
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../fp_scala/">
<span class="md-ellipsis">
    FP Scala
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    W3
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            W3
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../fp_scala_poly/">
<span class="md-ellipsis">
    FP Scala Polymorphic
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    W4
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            W4
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../fp_applicative_monad/">
<span class="md-ellipsis">
    FP Applicative Monads
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
<span class="md-ellipsis">
    W5
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            W5
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Syntax Analysis
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Syntax Analysis
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#learning-outcome">
<span class="md-ellipsis">
      Learning Outcome
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#a-compiler-pipeline">
<span class="md-ellipsis">
      A compiler pipeline
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#language-grammar-and-rules">
<span class="md-ellipsis">
      Language, Grammar and Rules
    </span>
</a>
<nav aria-label="Language, Grammar and Rules" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#what-is-a-language">
<span class="md-ellipsis">
      What is a language?
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#what-is-a-grammar">
<span class="md-ellipsis">
      What is a grammar?
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#a-running-example">
<span class="md-ellipsis">
      A running example
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#lexing">
<span class="md-ellipsis">
      Lexing
    </span>
</a>
<nav aria-label="Lexing" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#lexical-tokens">
<span class="md-ellipsis">
      Lexical Tokens
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#implementing-a-lexer-using-regular-expression">
<span class="md-ellipsis">
      Implementing a Lexer using Regular Expression
    </span>
</a>
<nav aria-label="Implementing a Lexer using Regular Expression" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#a-simple-example-of-using-scalautilmatchingregex">
<span class="md-ellipsis">
      A simple example of using scala.util.matching.Regex
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#implementing-a-lexer-using-a-parser">
<span class="md-ellipsis">
      Implementing a Lexer using a Parser
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#parsing">
<span class="md-ellipsis">
      Parsing
    </span>
</a>
<nav aria-label="Parsing" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#parsing-derivation">
<span class="md-ellipsis">
      Parsing Derivation
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ambiguous-grammar">
<span class="md-ellipsis">
      Ambiguous Grammar
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#grammar-with-left-recursion">
<span class="md-ellipsis">
      Grammar with Left Recursion
    </span>
</a>
<nav aria-label="Grammar with Left Recursion" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#predictive-recursive-parsing">
<span class="md-ellipsis">
      Predictive Recursive Parsing
    </span>
</a>
<nav aria-label="Predictive Recursive Parsing" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#first-first-conflict">
<span class="md-ellipsis">
      First-first Conflict
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#first-follow-conflict">
<span class="md-ellipsis">
      First-Follow Conflict
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#to-ll1-or-not-ll1">
<span class="md-ellipsis">
      To LL(1) or not LL(1)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#a-short-summary-so-far-for-top-down-recursive-parsing">
<span class="md-ellipsis">
      A short summary so far for top-down recursive parsing
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#summary">
<span class="md-ellipsis">
      Summary
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
<span class="md-ellipsis">
    W6
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            W6
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../syntax_analysis_parser_combinator/">
<span class="md-ellipsis">
    Syntax Analysis Parser Combinator
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ir_pseudo_assembly/">
<span class="md-ellipsis">
    IR &amp; Pseudo Assembly
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
<span class="md-ellipsis">
    W8
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_9_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_9">
<span class="md-nav__icon md-icon"></span>
            W8
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../semantic_analysis/">
<span class="md-ellipsis">
    Semantic Analysis
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../dynamic_semantics/">
<span class="md-ellipsis">
    Dynamic Semantics
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
<span class="md-ellipsis">
    W9
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_10_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_10">
<span class="md-nav__icon md-icon"></span>
            W9
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../static_semantics/">
<span class="md-ellipsis">
    Static Semantics
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../static_semantics_2/">
<span class="md-ellipsis">
    Static Semantics for Lambda Calculus
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_11" type="checkbox"/>
<label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
<span class="md-ellipsis">
    W10
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_11_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_11">
<span class="md-nav__icon md-icon"></span>
            W10
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../name_analysis/">
<span class="md-ellipsis">
    Name Analysis
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_12" type="checkbox"/>
<label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
<span class="md-ellipsis">
    W11
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_12_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_12">
<span class="md-nav__icon md-icon"></span>
            W11
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../sign_analysis_lattice/">
<span class="md-ellipsis">
    Lattices &amp; Sign Analysis
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../liveness_analysis/">
<span class="md-ellipsis">
    Liveness Analysis
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../code_generation/">
<span class="md-ellipsis">
    Code Generation
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_13" type="checkbox"/>
<label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
<span class="md-ellipsis">
    W12
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_13_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_13">
<span class="md-nav__icon md-icon"></span>
            W12
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../code_generation/">
<span class="md-ellipsis">
    Code Generation
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../advanced_static_analysis/">
<span class="md-ellipsis">
    Information Flow Analysis
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_14" type="checkbox"/>
<label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
<span class="md-ellipsis">
    W13
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_14_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_14">
<span class="md-nav__icon md-icon"></span>
            W13
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../memory_management/">
<span class="md-ellipsis">
    Memory Management
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#learning-outcome">
<span class="md-ellipsis">
      Learning Outcome
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#a-compiler-pipeline">
<span class="md-ellipsis">
      A compiler pipeline
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#language-grammar-and-rules">
<span class="md-ellipsis">
      Language, Grammar and Rules
    </span>
</a>
<nav aria-label="Language, Grammar and Rules" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#what-is-a-language">
<span class="md-ellipsis">
      What is a language?
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#what-is-a-grammar">
<span class="md-ellipsis">
      What is a grammar?
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#a-running-example">
<span class="md-ellipsis">
      A running example
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#lexing">
<span class="md-ellipsis">
      Lexing
    </span>
</a>
<nav aria-label="Lexing" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#lexical-tokens">
<span class="md-ellipsis">
      Lexical Tokens
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#implementing-a-lexer-using-regular-expression">
<span class="md-ellipsis">
      Implementing a Lexer using Regular Expression
    </span>
</a>
<nav aria-label="Implementing a Lexer using Regular Expression" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#a-simple-example-of-using-scalautilmatchingregex">
<span class="md-ellipsis">
      A simple example of using scala.util.matching.Regex
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#implementing-a-lexer-using-a-parser">
<span class="md-ellipsis">
      Implementing a Lexer using a Parser
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#parsing">
<span class="md-ellipsis">
      Parsing
    </span>
</a>
<nav aria-label="Parsing" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#parsing-derivation">
<span class="md-ellipsis">
      Parsing Derivation
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ambiguous-grammar">
<span class="md-ellipsis">
      Ambiguous Grammar
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#grammar-with-left-recursion">
<span class="md-ellipsis">
      Grammar with Left Recursion
    </span>
</a>
<nav aria-label="Grammar with Left Recursion" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#predictive-recursive-parsing">
<span class="md-ellipsis">
      Predictive Recursive Parsing
    </span>
</a>
<nav aria-label="Predictive Recursive Parsing" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#first-first-conflict">
<span class="md-ellipsis">
      First-first Conflict
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#first-follow-conflict">
<span class="md-ellipsis">
      First-Follow Conflict
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#to-ll1-or-not-ll1">
<span class="md-ellipsis">
      To LL(1) or not LL(1)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#a-short-summary-so-far-for-top-down-recursive-parsing">
<span class="md-ellipsis">
      A short summary so far for top-down recursive parsing
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#summary">
<span class="md-ellipsis">
      Summary
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="50054-syntax-analysis">50.054 - Syntax Analysis<a class="headerlink" href="#50054-syntax-analysis" title="Permanent link">¶</a></h1>
<h2 id="learning-outcome">Learning Outcome<a class="headerlink" href="#learning-outcome" title="Permanent link">¶</a></h2>
<p>By the end of this lesson, you should be able to</p>
<ol>
<li>Describe the roles and functionalities of lexers and parsers in a compiler pipeline</li>
<li>Describe the difference between top-down parsing and bottom-up parsing</li>
<li>Apply left-recursion elimination and left-factoring</li>
<li>Construct a <code>LL(1)</code> predictive parsing table</li>
<li>Explain first-first conflicts and first-follow conflicts</li>
</ol>
<h2 id="a-compiler-pipeline">A compiler pipeline<a class="headerlink" href="#a-compiler-pipeline" title="Permanent link">¶</a></h2>
<pre class="mermaid"><code>graph LR
A[Lexing] --&gt;B[Parsing] --&gt; C[Semantic Analysis] --&gt; D[Optimization] --&gt; E[Target Code Generation]</code></pre>
<ul>
<li>Lexing</li>
<li>Input: Source file in String</li>
<li>Output: A sequence of valid tokens according to the language specification (grammar)</li>
<li>Parsing</li>
<li>Input: Output from the Lexer</li>
<li>Output: A parse tree representing parsed result according to the parse derivation</li>
</ul>
<p>A parse tree can be considered the first intermediate representation (IR).</p>
<h2 id="language-grammar-and-rules">Language, Grammar and Rules<a class="headerlink" href="#language-grammar-and-rules" title="Permanent link">¶</a></h2>
<h3 id="what-is-a-language">What is a language?<a class="headerlink" href="#what-is-a-language" title="Permanent link">¶</a></h3>
<p>A language is a set of strings.</p>
<h3 id="what-is-a-grammar">What is a grammar?<a class="headerlink" href="#what-is-a-grammar" title="Permanent link">¶</a></h3>
<p>A grammar is a specification of a language, including the set of valid words (vocabulary) and the set of possible structures formed by the words.</p>
<p>One common way to define a grammar is by defining a set of production rules.</p>
<h3 id="a-running-example">A running example<a class="headerlink" href="#a-running-example" title="Permanent link">¶</a></h3>
<p>Let's consider the language of JSON. Though JSON has no operational semantics, i.e. it's not executable, it serves a good subject for syntax analysis.</p>
<p>The grammar rule for JSON is as follows</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span>
<span class="normal"><a href="#__codelineno-0-2">2</a></span>
<span class="normal"><a href="#__codelineno-0-3">3</a></span>
<span class="normal"><a href="#__codelineno-0-4">4</a></span>
<span class="normal"><a href="#__codelineno-0-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1"></a>&lt;&lt;Grammar 1&gt;&gt;
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2"></a>(JSON) J ::= i | 's' | [] | [IS] | {NS}
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3"></a>(Items) IS ::= J,IS | J
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4"></a>(Named Objects) NS ::= N,NS | N
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5"></a>(Named Object) N ::= 's':J
</span></code></pre></div></td></tr></table></div>
<p>In the above, the grammar consists of four production rules. Each production rule is of form</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1"></a>(Name) LHS ::= RHS 
</span></code></pre></div></td></tr></table></div>
<p>Sometimes, we omit the Name.
Terms in upper case, are<br/>
the <em>non-terminal</em>s, and terms in lower case, and symbol terms are the <em>terminal</em>s.</p>
<p>For each production rule, the LHS is always a non-terminal. On the RHS, we have alternatives separated by <code>|</code>. Each alternatives consists of terminals, non-terminals and mixture of both.</p>
<p>For instance, the production rule <code>(JSON)</code> states that a JSON non-terminal <code>J</code> is either an <code>i</code> (an integer), a <code>'s'</code> (a quoted string), an empty list <code>[]</code>, an non-empty list <code>[IS]</code> and an object <code>{NS}</code>.  </p>
<p>A production rule with multiple alternatives, can be rewritten into multiple production rules without alternatives. For instance, the <code>(JSON)</code> production rule can be rewritten as follows,</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">1</a></span>
<span class="normal"><a href="#__codelineno-2-2">2</a></span>
<span class="normal"><a href="#__codelineno-2-3">3</a></span>
<span class="normal"><a href="#__codelineno-2-4">4</a></span>
<span class="normal"><a href="#__codelineno-2-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1"></a>J ::= i
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2"></a>J ::= 's'
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3"></a>J ::= []
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4"></a>J ::= [IS]
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5"></a>J ::= {NS}
</span></code></pre></div></td></tr></table></div>
<p>For each grammar, we expect the LHS of the first production rule is the starting symbol.</p>
<h2 id="lexing">Lexing<a class="headerlink" href="#lexing" title="Permanent link">¶</a></h2>
<p><strong>Input:</strong> Source file in string</p>
<p><strong>Output:</strong> A sequence of valid tokens according to the language specification (grammar)</p>
<p>The purpose of a lexer is to scan through the input source file to ensure the text is constructed as a sequence of valid tokens specified by the syntax rules of the source langugage. The focus is on token-level. The inter-token constraint validation is performed in the next step, <em>Parsing</em>.</p>
<p>Sometimes, a lexer is omitted, as the token validation task can be handled in the parser.</p>
<h3 id="lexical-tokens">Lexical Tokens<a class="headerlink" href="#lexical-tokens" title="Permanent link">¶</a></h3>
<p>The set of tokens of a grammar is basically all the terminals. In this JSON grammar example,</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1"></a>{i, s, ', [, ], {, }, :, \, }
</span></code></pre></div></td></tr></table></div>
<p>and white spaces are the Lexical Tokens of the language.</p>
<p>If we are to represent it using Scala data types, we could use the following algebraic data type:</p>
<div class="language-scala highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="k">enum</span><span class="w"> </span><span class="nc">LToken</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// lexical Tokens</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="nc">IntTok</span><span class="p">(</span><span class="n">v</span><span class="p">:</span><span class="nc">Int</span><span class="p">)</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="nc">StrTok</span><span class="p">(</span><span class="n">v</span><span class="p">:</span><span class="nc">String</span><span class="p">)</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="nc">SQuote</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="nc">LBracket</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="nc">RBracket</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="nc">LBrace</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="nc">RBrace</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="nc">Colon</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="nc">Comma</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="nc">WhiteSpace</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Note that in the above, we find that <code>IntTok</code> and <code>StrTok</code> have semantic components (i.e. the underlying values.) The rest of the tokens  do not.</p>
<p>Given the input</p>
<div class="language-json highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="p">{</span><span class="err">'k</span><span class="mi">1</span><span class="err">'</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="err">'k</span><span class="mi">2</span><span class="err">'</span><span class="p">:[]}</span>
</span></code></pre></div></td></tr></table></div>
<p>the  lexer function <code>lex(s:String):List[LToken]</code> should return</p>
<div class="language-scala highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="nc">List</span><span class="p">(</span><span class="nc">LBRace</span><span class="p">,</span><span class="nc">SQuote</span><span class="p">,</span><span class="nc">StrTok</span><span class="p">(</span><span class="s">"k1"</span><span class="p">),</span><span class="nc">SQuote</span><span class="p">,</span><span class="nc">Colon</span><span class="p">,</span><span class="nc">IntTok</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="nc">Comma</span><span class="p">,</span><span class="nc">SQuote</span><span class="p">,</span><span class="w"> </span><span class="nc">StrTok</span><span class="p">(</span><span class="s">"k2"</span><span class="p">),</span><span class="w"> </span><span class="nc">Colon</span><span class="p">,</span><span class="nc">LBracket</span><span class="p">,</span><span class="w"> </span><span class="nc">RBracket</span><span class="p">,</span><span class="w"> </span><span class="nc">RBrace</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
<p>One could argue that we cheat by assuming the integer and string data types are available as builtin terminals. In case we don't have integer and string as builtin terminals, we could expand the grammar as follows:</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span>
<span class="normal"><a href="#__codelineno-7-2">2</a></span>
<span class="normal"><a href="#__codelineno-7-3">3</a></span>
<span class="normal"><a href="#__codelineno-7-4">4</a></span>
<span class="normal"><a href="#__codelineno-7-5">5</a></span>
<span class="normal"><a href="#__codelineno-7-6">6</a></span>
<span class="normal"><a href="#__codelineno-7-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1"></a>&lt;&lt;Grammar 2&gt;&gt;
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2"></a>(JSON) J ::= I | 'STR' | [] | [IS] | {NS}
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3"></a>(Items) IS ::= J,IS | J
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4"></a>(Named Objects) NS ::= N,NS | N
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5"></a>(Named Object) N ::= 'STR':J
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6"></a>(Integer) I ::= dI | d
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7"></a>(String) STR ::= aSTR | a
</span></code></pre></div></td></tr></table></div>
<p>where <code>d</code> denotes a single digit and <code>a</code> denotes a single ascii character.</p>
<p>For the rest of this lesson, we will stick with the first formulation in which we have integer and string terminals builtin, which is common for modern languages.</p>
<h3 id="implementing-a-lexer-using-regular-expression">Implementing a Lexer using Regular Expression<a class="headerlink" href="#implementing-a-lexer-using-regular-expression" title="Permanent link">¶</a></h3>
<p>Perhaps one easier way to implement a lexer is to make use of regular expression.</p>
<h4 id="a-simple-example-of-using-scalautilmatchingregex">A simple example of using <code>scala.util.matching.Regex</code><a class="headerlink" href="#a-simple-example-of-using-scalautilmatchingregex" title="Permanent link">¶</a></h4>
<p>We can specify a regex pattern as follows. This example was adopted from
(<a href="https://www.scala-lang.org/api/3.3.6/scala/util/matching/Regex.html">https://www.scala-lang.org/api/3.3.6/scala/util/matching/Regex.html</a>)</p>
<div class="language-scala highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="kd">val</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">raw"(\d{4})-(\d{2})-(\d{2})"</span><span class="p">.</span><span class="n">r</span>
</span></code></pre></div></td></tr></table></div>
<p>Next we can perform a match against the above regex pattern using the <code>match</code> expression.</p>
<div class="language-scala highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1">1</a></span>
<span class="normal"><a href="#__codelineno-9-2">2</a></span>
<span class="normal"><a href="#__codelineno-9-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="s">"2004-01-20"</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="n">month</span><span class="p">,</span><span class="w"> </span><span class="n">day</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s">s"</span><span class="si">$</span><span class="n">year</span><span class="s"> was a good year for PLs."</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>The above expression is evaluated to</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1"></a>2004 was a good year for PLs.
</span></code></pre></div></td></tr></table></div>
<p>We could develop a simple lexer using the above trick. First we define the pattern for reach token.</p>
<div class="language-scala highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span>
<span class="normal"><a href="#__codelineno-11-2">2</a></span>
<span class="normal"><a href="#__codelineno-11-3">3</a></span>
<span class="normal"><a href="#__codelineno-11-4">4</a></span>
<span class="normal"><a href="#__codelineno-11-5">5</a></span>
<span class="normal"><a href="#__codelineno-11-6">6</a></span>
<span class="normal"><a href="#__codelineno-11-7">7</a></span>
<span class="normal"><a href="#__codelineno-11-8">8</a></span>
<span class="normal"><a href="#__codelineno-11-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="kd">val</span><span class="w"> </span><span class="n">integer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">raw"(\d+)(.*)"</span><span class="p">.</span><span class="n">r</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="kd">val</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">raw"([^']*)(.*)"</span><span class="p">.</span><span class="n">r</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="kd">val</span><span class="w"> </span><span class="n">squote</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">raw"(')(.*)"</span><span class="p">.</span><span class="n">r</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="kd">val</span><span class="w"> </span><span class="n">lbracket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">raw"(\[)(.*)"</span><span class="p">.</span><span class="n">r</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="kd">val</span><span class="w"> </span><span class="n">rbracket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">raw"(\])(.*)"</span><span class="p">.</span><span class="n">r</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="kd">val</span><span class="w"> </span><span class="n">lbrace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">raw"(\{)(.*)"</span><span class="p">.</span><span class="n">r</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="kd">val</span><span class="w"> </span><span class="n">rbrace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">raw"(\})(.*)"</span><span class="p">.</span><span class="n">r</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="kd">val</span><span class="w"> </span><span class="n">colon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">raw"(:)(.*)"</span><span class="p">.</span><span class="n">r</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="kd">val</span><span class="w"> </span><span class="n">comma</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">raw"(,)(.*)"</span><span class="p">.</span><span class="n">r</span>
</span></code></pre></div></td></tr></table></div>
<p>For each token, we have two sub patterns, the first sub-pattern capture the token, and second sub-pattern captures the remaining input, so that we can pass it to the next iteration.</p>
<p>Next we define the following function which tries to extract a token from the begining of the input string, and return the rest if a match is found, otherwise, an error is returned.</p>
<div class="language-scala highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-12-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-12-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-12-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-12-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-12-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-12-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-12-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-12-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-12-10">10</a></span>
<span class="normal"><a href="#__codelineno-12-11">11</a></span>
<span class="normal"><a href="#__codelineno-12-12">12</a></span>
<span class="normal"><a href="#__codelineno-12-13">13</a></span>
<span class="normal"><a href="#__codelineno-12-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="k">import</span><span class="w"> </span><span class="nc">LToken</span><span class="p">.</span><span class="n">*</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="k">type</span><span class="w"> </span><span class="nc">Error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">String</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="k">def</span><span class="w"> </span><span class="nf">lex_one</span><span class="p">(</span><span class="n">src</span><span class="p">:</span><span class="nc">String</span><span class="p">):</span><span class="nc">Either</span><span class="p">[</span><span class="nc">String</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nc">LToken</span><span class="p">,</span><span class="w"> </span><span class="nc">String</span><span class="p">)]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">src</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="n">integer</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nc">Right</span><span class="p">((</span><span class="nc">IntTok</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">toInt</span><span class="p">),</span><span class="w"> </span><span class="n">rest</span><span class="p">))</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="n">squote</span><span class="p">(</span><span class="n">_</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nc">Right</span><span class="p">((</span><span class="nc">SQuote</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="p">))</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="n">lbracket</span><span class="p">(</span><span class="n">_</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nc">Right</span><span class="p">((</span><span class="nc">LBracket</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="p">))</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="n">rbracket</span><span class="p">(</span><span class="n">_</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nc">Right</span><span class="p">((</span><span class="nc">RBracket</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="p">))</span><span class="w"> </span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="n">lbrace</span><span class="p">(</span><span class="n">_</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nc">Right</span><span class="p">((</span><span class="nc">LBracket</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="p">))</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="n">rbrace</span><span class="p">(</span><span class="n">_</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nc">Right</span><span class="p">((</span><span class="nc">RBracket</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="p">))</span><span class="w"> </span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="n">colon</span><span class="p">(</span><span class="n">_</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nc">Right</span><span class="p">((</span><span class="nc">Colon</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="p">))</span>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="n">comma</span><span class="p">(</span><span class="n">_</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nc">Right</span><span class="p">((</span><span class="nc">Comma</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="p">))</span>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="n">string</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nc">Right</span><span class="p">((</span><span class="nc">StrTok</span><span class="p">(</span><span class="n">s</span><span class="p">),</span><span class="w"> </span><span class="n">rest</span><span class="p">))</span>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nc">Left</span><span class="p">(</span><span class="s">s"lexer error: unexpected token at </span><span class="si">${</span><span class="n">src</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Note that the order of the Scala patterns is important, since there is some overlapping cases from the above definition (e.g. the regex pattern <code>string</code> and the rest except for <code>squote</code>).</p>
<p>Lastly we define the top level <code>lex</code> function by calling <code>lex_one</code> in a recursive function.</p>
<div class="language-scala highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-13-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-13-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-13-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-13-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-13-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-13-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-13-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-13-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-13-10">10</a></span>
<span class="normal"><a href="#__codelineno-13-11">11</a></span>
<span class="normal"><a href="#__codelineno-13-12">12</a></span>
<span class="normal"><a href="#__codelineno-13-13">13</a></span>
<span class="normal"><a href="#__codelineno-13-14">14</a></span>
<span class="normal"><a href="#__codelineno-13-15">15</a></span>
<span class="normal"><a href="#__codelineno-13-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">lex</span><span class="p">(</span><span class="n">src</span><span class="p">:</span><span class="nc">String</span><span class="p">):</span><span class="nc">Either</span><span class="p">[</span><span class="nc">Error</span><span class="p">,</span><span class="w"> </span><span class="nc">List</span><span class="p">[</span><span class="nc">LToken</span><span class="p">]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="w">    </span><span class="k">def</span><span class="w"> </span><span class="nf">go</span><span class="p">(</span><span class="n">src</span><span class="p">:</span><span class="nc">String</span><span class="p">,</span><span class="w"> </span><span class="n">acc</span><span class="p">:</span><span class="nc">List</span><span class="p">[</span><span class="nc">LToken</span><span class="p">]):</span><span class="nc">Either</span><span class="p">[</span><span class="nc">Error</span><span class="p">,</span><span class="w"> </span><span class="nc">List</span><span class="p">[</span><span class="nc">LToken</span><span class="p">]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">src</span><span class="p">.</span><span class="n">length</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w">  </span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="w">            </span><span class="nc">Right</span><span class="p">(</span><span class="n">acc</span><span class="p">)</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="w">        </span><span class="k">else</span><span class="w"> </span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="w">            </span><span class="n">lex_one</span><span class="p">(</span><span class="n">src</span><span class="p">)</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10"></a><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="nc">Left</span><span class="p">(</span><span class="n">error</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nc">Left</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11"></a><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="nc">Right</span><span class="p">((</span><span class="n">ltoken</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="p">))</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">go</span><span class="p">(</span><span class="n">rest</span><span class="p">,</span><span class="w"> </span><span class="n">acc</span><span class="o">++</span><span class="nc">List</span><span class="p">(</span><span class="n">ltoken</span><span class="p">))</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15"></a><span class="w">    </span><span class="n">go</span><span class="p">(</span><span class="n">src</span><span class="p">,</span><span class="w"> </span><span class="nc">List</span><span class="p">())</span>
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<h3 id="implementing-a-lexer-using-a-parser">Implementing a Lexer using a Parser<a class="headerlink" href="#implementing-a-lexer-using-a-parser" title="Permanent link">¶</a></h3>
<p>In general, parsers are capable of handling context free grammar, which is a super-set of the regular grammars. (A grammar that can be expressed as a regular expression is a regular grammar.)</p>
<p>Hence it is possible to implement a lexer using a parser, which we are going to discuss in the cohort problems.</p>
<h2 id="parsing">Parsing<a class="headerlink" href="#parsing" title="Permanent link">¶</a></h2>
<p><strong>Input:</strong> Output from the Lexer</p>
<p><strong>Output:</strong> A parse tree representing parsed result according to the parse derivation</p>
<p>Why tree representation?</p>
<ol>
<li>Firstly, a tree representation allows efficient access to the sub parts of the source code and intuitive transformation.</li>
<li>Secondly, a tree representation captures the relationship between the LHS non-terminals and their RHS in the production rules.</li>
</ol>
<h3 id="parsing-derivation">Parsing Derivation<a class="headerlink" href="#parsing-derivation" title="Permanent link">¶</a></h3>
<p>Given an input list of tokens, we could "walk" through the production rules starting from the starting non-terminal to find the part that is "matching with" the RHS.</p>
<p>Consider the JSON grammar in its unabridged form,</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-14-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-14-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-14-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-14-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-14-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-14-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-14-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-14-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-14-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1"></a>(1) J ::= i
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2"></a>(2) J ::= 's'
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3"></a>(3) J ::= []
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4"></a>(4) J ::= [IS]
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5"></a>(5) J ::= {NS}
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6"></a>(6) IS ::= J,IS
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7"></a>(7) IS ::= J 
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8"></a>(8) NS ::= N,NS
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9"></a>(9) NS ::= N
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10"></a>(10) N ::= 's':J
</span></code></pre></div></td></tr></table></div>
<p>We take the output from our lexer example as the input, with some simplification by removing the Scala constructors</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1"></a>{ , ' , k1 , ' , : , 1 , , , ' , k2 , : , [ , ] , }
</span></code></pre></div></td></tr></table></div>
<p>For each token, we attempt to search for a matched rule by scanning the set of production rules from top to bottom.</p>
<table>
<tr>
<th> Rule </th> <th> Parse tree </th> <th> Symbols </th> <th> Input </th>
</tr>
<tr> <td> (5) </td>
<td>
<div class="mermaid">
graph
  J--&gt;LB["{"]
  J--&gt;NS
  J--&gt;RB["}"]
</div>
</td>
<td>
<u>{ </u> NS }
</td>
<td>
<u>{ </u> ' k  1 ' : 1 , ' k 2 ' : [ ] }
</td>
</tr>
<tr>
<td>
</td>
<td>
<div class="mermaid">
graph
  J--&gt;LB["{"]
  J--&gt;NS
  J--&gt;RB["}"]
</div>
</td>
<td>
  NS }
</td>
<td>
 ' k  1 ' : 1 , ' k 2 ' : [ ] }
</td>
</tr>
<tr>
<td>
(8)
</td>
<td>
<div class="mermaid">
graph
  J--&gt;LB["{"]
  J--&gt;NS
  J--&gt;RB["}"]
  NS--&gt;N
  NS--&gt;,
  NS--&gt;NS2["NS"]
</div>
</td>
<td>
N,NS }
</td>
<td>
 ' k  1 ' : 1 , ' k 2 ' : [ ] }
</td>
</tr>
<tr>
<td colspan="4"> ... (for the steps skipped, please refer to syntax_analysis_annex.md) </td>
</tr>
<tr>
<td>
(3)
</td>
<td>
<div class="mermaid">
graph
  J--&gt;LB["{"]
  J--&gt;NS
  J--&gt;RB["}"]
  NS--&gt;N
  NS--&gt;,
  NS--&gt;NS2["NS"]
  N--&gt;LQ[']
  N--&gt;S1("s(k1)")
  N--&gt;RQ[']
  N--&gt;:
  N--&gt;J2[J]
  J2--&gt;i["i(1)"]
  NS2--&gt;N2[N]
  N2--&gt;LQ2[']
  N2--&gt;S2["s(k2)"]
  N2--&gt;RQ2[']
  N2--&gt;CL2[":"]
  N2--&gt;J3[J]
  J3--&gt;LSQ["["]
  J3--&gt;RSQ["]"];
</div>
</td>
<td>
<u>[ ] }</u>
</td>
<td>
<u>[ ] }</u>
</td>
</tr>
<tr>
<td>
</td>
<td>
<div class="mermaid">
graph
  J--&gt;LB["{"]
  J--&gt;NS
  J--&gt;RB["}"]
  NS--&gt;N
  NS--&gt;,
  NS--&gt;NS2["NS"]
  N--&gt;LQ[']
  N--&gt;S1("s(k1)")
  N--&gt;RQ[']
  N--&gt;:
  N--&gt;J2[J]
  J2--&gt;i["i(1)"]
  NS2--&gt;N2[N]
  N2--&gt;LQ2[']
  N2--&gt;S2["s(k2)"]
  N2--&gt;RQ2[']
  N2--&gt;CL2[":"]
  N2--&gt;J3[J]
  J3--&gt;LSQ["["]
  J3--&gt;RSQ["]"];
</div>
</td>
<td>
</td>
<td>
</td>
</tr>
</table>
<p>From the above example, it shows that we could implement a parsing routine by recursively searching for a matching production rule based on the current input string and non-terminal (LHS).</p>
<p>This algorithm is easy to understand but it has some flaws.</p>
<ol>
<li>It does not terminate when the grammar contains left recursion.</li>
<li>It involves some trial-and-error (back-tracking), hence it is not efficient</li>
</ol>
<h3 id="ambiguous-grammar">Ambiguous Grammar<a class="headerlink" href="#ambiguous-grammar" title="Permanent link">¶</a></h3>
<p>A grammar is said to be <em>ambiguous</em> if parsing it with an input can produce two different parse trees.</p>
<p>Consider the following</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1">1</a></span>
<span class="normal"><a href="#__codelineno-16-2">2</a></span>
<span class="normal"><a href="#__codelineno-16-3">3</a></span>
<span class="normal"><a href="#__codelineno-16-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1"></a>&lt;&lt;Grammar 3&gt;&gt;
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2"></a>E ::= E + E 
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3"></a>E ::= E * E
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4"></a>E ::= i
</span></code></pre></div></td></tr></table></div>
<p>Consider the input <code>1 + 2 * 3</code>. Parsing this input with the above grammar produces</p>
<pre class="mermaid"><code>graph
  E--&gt;E1["E"]
  E--&gt;+
  E--&gt;E2["E"] 
  E1--&gt;i1["i(1)"]
  E2--&gt;E3["E"]
  E2--&gt;*
  E2--&gt;E4["E"]
  E3--&gt;i2["i(2)"]
  E4--&gt;i3["i(3)"];</code></pre>
<p>or</p>
<pre class="mermaid"><code>graph
  E--&gt;E1["E"]
  E--&gt;* 
  E--&gt;E2["E"] 
  E1--&gt;E3["E"]
  E1--&gt;+
  E1--&gt;E4["E"]
  E2--&gt;i3["i(3)"]
  E3--&gt;i1["i(1)"]
  E4--&gt;i2["i(2)"];</code></pre>
<p>To resolve ambiguity, the language designers need to make decision to give priority to certain production rules by rewriting it. For example, we argue that <code>*</code> should bind stronger than <code>+</code>. Thus we should rewrite (or rather "restrict") the ambiguous Grammar 3 into the following subset</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1">1</a></span>
<span class="normal"><a href="#__codelineno-17-2">2</a></span>
<span class="normal"><a href="#__codelineno-17-3">3</a></span>
<span class="normal"><a href="#__codelineno-17-4">4</a></span>
<span class="normal"><a href="#__codelineno-17-5">5</a></span>
<span class="normal"><a href="#__codelineno-17-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1"></a>&lt;&lt;Grammar 4&gt;&gt;
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2"></a>E::= T + E
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3"></a>E::= T
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4"></a>T::= T * F 
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5"></a>T::= F
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6"></a>F::= i
</span></code></pre></div></td></tr></table></div>
<p>As a result, the input <code>1 + 2 * 3</code> is parsed as</p>
<pre class="mermaid"><code>graph
  E--&gt;T1["T"]
  E--&gt;+ 
  E--&gt;E1["E"] 
  T1--&gt;F1["F"]
  F1--&gt;i1["i(1)"]
  E1--&gt;T2["T"]
  T2--&gt;T3["T"]
  T3--&gt;F2["F"]
  F2--&gt;i2["i(2)"]
  T2--&gt;*
  T2--&gt;F3["F"]
  F3--&gt;i3["i(3)"]
  ;</code></pre>
<h3 id="grammar-with-left-recursion">Grammar with Left Recursion<a class="headerlink" href="#grammar-with-left-recursion" title="Permanent link">¶</a></h3>
<p>Let's try to run a top-down recursive parsing algorithm over the following grammar</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1">1</a></span>
<span class="normal"><a href="#__codelineno-18-2">2</a></span>
<span class="normal"><a href="#__codelineno-18-3">3</a></span>
<span class="normal"><a href="#__codelineno-18-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1"></a>&lt;&lt;Grammar 5&gt;&gt;
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2"></a>E ::= E + T
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3"></a>E ::= T
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4"></a>T ::= i
</span></code></pre></div></td></tr></table></div>
<p><code>i</code> and <code>+</code> are terminals, and <code>E</code> and <code>T</code> are the non-terminals. <code>i</code> denotes an integer.</p>
<p>Consider applying the top-down recursive parsing mentioned above to the input <code>1</code>, if the first production rule is always selected, the algorithm would not terminate. The issue is that the first production rule containing a recursion at the left-most position. To eliminate left recursion in general, we consider the following transformation.</p>
<p>Let <code>N</code> be a non-terminal, <span class="arithmatex">\(\alpha_i\)</span> and
<span class="arithmatex">\(\beta_j\)</span> be sequences of symbols (consist of terminals and non-terminals)</p>
<p>Left recursive grammar rules</p>
<div class="arithmatex">\[
\begin{array}{rcl}
N &amp; ::= &amp; N\alpha_1 \\
&amp; ... &amp; \\
N &amp; ::= &amp; N\alpha_n \\
N &amp; ::= &amp; \beta_1 \\
&amp; ... &amp; \\
N &amp; ::= &amp; \beta_m
\end{array}
\]</div>
<p>can be transformed into</p>
<div class="arithmatex">\[
\begin{array}{rcl}
N &amp; ::= &amp; \beta_1 N' \\
&amp; ... &amp; \\
N &amp; ::= &amp; \beta_m N' \\
N' &amp; ::= &amp; \alpha_1 N' \\
&amp; ... &amp; \\
N' &amp; ::= &amp; \alpha_n N' \\
N' &amp; ::= &amp; \epsilon
\end{array}
\]</div>
<p>Now apply the above to our running example.</p>
<ul>
<li><span class="arithmatex">\(N\)</span> is <code>E</code> and</li>
<li><span class="arithmatex">\(\alpha_1\)</span> is <code>+ T</code>,</li>
<li><code>T</code> is <span class="arithmatex">\(\beta_1\)</span>.</li>
</ul>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1">1</a></span>
<span class="normal"><a href="#__codelineno-19-2">2</a></span>
<span class="normal"><a href="#__codelineno-19-3">3</a></span>
<span class="normal"><a href="#__codelineno-19-4">4</a></span>
<span class="normal"><a href="#__codelineno-19-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1"></a>&lt;&lt;Grammar 6&gt;&gt;
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2"></a>E ::= TE'
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3"></a>E' ::= + TE'
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4"></a>E' ::= epsilon
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5"></a>T ::= i
</span></code></pre></div></td></tr></table></div>
<p>The resulting Grammar 6 is equivalent the original Grammar 5.  Note that epsilon (<span class="arithmatex">\(\epsilon\)</span>) is a special terminal which denotes an empty sequence.</p>
<p>There are few points to take note</p>
<ol>
<li>For indirect left recursion, some substitution steps are required before applying the above transformation. For instance</li>
</ol>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1">1</a></span>
<span class="normal"><a href="#__codelineno-20-2">2</a></span>
<span class="normal"><a href="#__codelineno-20-3">3</a></span>
<span class="normal"><a href="#__codelineno-20-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1"></a>&lt;&lt;Grammar 7&gt;&gt;
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2"></a>G ::= H + G
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3"></a>H ::= G + i
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4"></a>H ::= i
</span></code></pre></div></td></tr></table></div>
<p>We need to substitute <code>H</code> into the first production rule.</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1">1</a></span>
<span class="normal"><a href="#__codelineno-21-2">2</a></span>
<span class="normal"><a href="#__codelineno-21-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1"></a>&lt;&lt;Grammar 8&gt;&gt;
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2"></a>G ::= G + i + G
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3"></a>G ::= i + G
</span></code></pre></div></td></tr></table></div>
<ol>
<li>Since we have changed the grammar production rules, we need to use the transformed grammar for parsing, resulting in the parse trees being generated in the shape of the transformed grammar. We need to perform an extra step of (backwards) transformation to turn the parse trees back to the original grammar. For example, parsing the input <code>1 + 1</code> with Grammar 6 yields the following parse tree</li>
</ol>
<div class="mermaid">
graph
  E--&gt;T1["T"]
  E--&gt;Ep1[E']
  T1--&gt;i1["i(1)"]
  Ep1--&gt;+
  Ep1--&gt;T2[T]
  Ep1--&gt;Ep2[E']
  T2--&gt;i2["i(1)"]
  Ep2--&gt;eps1[ε]
</div>
<p>which needs to be transformed back to</p>
<div class="mermaid">
graph
  E--&gt;E1["E"]
  E--&gt;+
  E--&gt;T1["T"]
  E1--&gt;T2["T"]
  T1--&gt;i1["i(1)"]
  T2--&gt;i2["i(1)"]
</div>
<h4 id="predictive-recursive-parsing">Predictive Recursive Parsing<a class="headerlink" href="#predictive-recursive-parsing" title="Permanent link">¶</a></h4>
<p>Next we address the inefficiency issue with our naive parsing algorithm.
One observation from the derivation example we've seen earlier is that
if we are able to pick the "right" production rule without trial-and-error, we would eliminate the backtracking.</p>
<p>In order to do that we need to ensure the grammar we work with is a particular class of grammar, which is also known as <code>LL(k)</code> grammar.
Here <code>k</code> refers to the number of leading symbols from the input we need to check in order to identify a particular production rule to apply without back-tracking.</p>
<p>BTW, <code>LL(k)</code> stands for left-to-right, left-most derivation with <code>k</code> tokens look-ahead algorithm.</p>
<p>Let <span class="arithmatex">\(\sigma\)</span> denote a symbol, (it could be a terminal or a non-terminal).
Let <span class="arithmatex">\(\overline{\sigma}\)</span> denote a sequence of symbols.
Given a grammar <span class="arithmatex">\(G\)</span> we define the following functions <span class="arithmatex">\(null(\overline{\sigma},G)\)</span>, <span class="arithmatex">\(first(\overline{\sigma},G)\)</span> and <span class="arithmatex">\(follow(\sigma, G)\)</span></p>
<p><span class="arithmatex">\(null(\overline{\sigma},G)\)</span> checks whether the language denoted by <span class="arithmatex">\(\overline{\sigma}\)</span> contains the empty sequence.</p>
<div class="arithmatex">\[
\begin{array}{rcl}
null(t,G) &amp; = &amp; false \\
null(\epsilon,G) &amp; = &amp; true \\
null(N,G) &amp; = &amp; \bigvee_{N::=\overline{\sigma} \in G} null(\overline{\sigma},G) \\
null(\sigma_1...\sigma_n,G) &amp; = &amp; null(\sigma_1,G) \wedge ... \wedge null(\sigma_n,G)
\end{array}
\]</div>
<p><span class="arithmatex">\(first(\overline{\sigma},G)\)</span> computes the set of leading terminals from the language denoted by <span class="arithmatex">\(\overline{\sigma}\)</span>.</p>
<div class="arithmatex">\[
\begin{array}{rcl}
first(\epsilon, G) &amp; = &amp; \{\} \\
first(t,G) &amp; = &amp; \{t\} \\
first(N,G) &amp; = &amp; \bigcup_{N::=\overline{\sigma} \in G} first(\overline{\sigma},G) \\
first(\sigma\overline{\sigma},G) &amp; = &amp;
  \left [
    \begin{array}{ll}
      first(\sigma,G) \cup first(\overline{\sigma},G) &amp; {\tt if}\ null(\sigma,G) \\
      first(\sigma,G) &amp; {\tt otherwise}
      \end{array}
  \right .
\end{array}
\]</div>
<p><span class="arithmatex">\(follow(\sigma,G)\)</span> finds the set of terminals that immediately follows symbol <span class="arithmatex">\(\sigma\)</span> in any derivation derivable from <span class="arithmatex">\(G\)</span>.</p>
<div class="arithmatex">\[
\begin{array}{rcl}
follow(\sigma,G) &amp; = &amp; \bigcup_{N::=\overline{\sigma}\sigma{\overline{\gamma}} \in G}
  \left [
    \begin{array}{ll}
      first(\overline{\gamma}, G) \cup follow(N,G) &amp; {\tt if}\ null(\overline{\gamma}, G) \\
      first(\overline{\gamma}, G) &amp; {\tt otherwise}
    \end{array}
  \right .
\end{array}
\]</div>
<p>Sometimes, for convenience we omit the second parameter <span class="arithmatex">\(G\)</span>.</p>
<p>For example, let <span class="arithmatex">\(G\)</span> be Grammar 6, then</p>
<div class="arithmatex">\[
\begin{array}{l}
null(E) = null(TE') = null(T) \wedge null(E') = false \wedge null(E') = false \\
null(E') = null(+TE') \vee null(\epsilon) = null(+TE') \vee true = true \\
null(T) = null(i) = false \\
\\
first(E) = first(TE') = first(T) =  \{i\} \\
first(E') = first(+TE') \cup first(\epsilon) = first(+TE') = \{+\} \\
first(T) = \{i\} \\
\\
follow(E) = \{\} \\
follow(E') = follow(E) \cup follow(E') = \{\} \cup follow(E') \\
follow(T) = first(E') \cup follow(E') = \{+\} \cup follow(E')
\end{array}
\]</div>
<p>When computing <span class="arithmatex">\(follow(E')\)</span> and <span class="arithmatex">\(follow(T)\)</span> we encounter an infinite sequence of <span class="arithmatex">\(\cup follow(E')\)</span> which leads to a <em>fix-point</em>. That is, an infinite sequence of repeated operation that does not add any value to the existing result. We can conclude that
<span class="arithmatex">\(follow(E') = \{\}\)</span> and <span class="arithmatex">\(follow(T) = \{+\}\)</span>.</p>
<p>We will discuss fix-point in-depth in some lesson later.</p>
<p>Given <span class="arithmatex">\(null\)</span>, <span class="arithmatex">\(first\)</span> and <span class="arithmatex">\(follow\)</span> computed, we can construct a <em>predictive parsing table</em> to check whether the grammar is in <code>LL(k)</code>. For simplicity, we check the case <code>k = 1</code>, we construct the following predictive parsing table where each row is indexed a non-terminal, and each column is indexed by a terminal.</p>
<table>
<thead>
<tr>
<th></th>
<th>i</th>
<th>+</th>
</tr>
</thead>
<tbody>
<tr>
<td>E</td>
<td></td>
<td></td>
</tr>
<tr>
<td>E'</td>
<td></td>
<td></td>
</tr>
<tr>
<td>T</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>For each production rule <span class="arithmatex">\(N ::= \overline{\sigma}\)</span>, we put the production rule in</p>
<ul>
<li>cell <span class="arithmatex">\((N,t)\)</span> if <span class="arithmatex">\(t \in first(\overline{\sigma})\)</span></li>
<li>cell <span class="arithmatex">\((N,t')\)</span> if <span class="arithmatex">\(null(\overline{\sigma})\)</span> and <span class="arithmatex">\(t' \in follow(N)\)</span></li>
</ul>
<p>We fill up the table</p>
<table>
<thead>
<tr>
<th></th>
<th>i</th>
<th>+</th>
</tr>
</thead>
<tbody>
<tr>
<td>E</td>
<td>E ::= TE'</td>
<td></td>
</tr>
<tr>
<td>E'</td>
<td></td>
<td>E' ::= + TE'</td>
</tr>
<tr>
<td>T</td>
<td>T ::= i</td>
<td></td>
</tr>
</tbody>
</table>
<p>We conclude that a grammar is in <code>LL(1)</code> if it contains no conflicts. A conflict arises when there are more than one production rule to be applied given a non-terminal and a leading symbol. Given a <code>LL(1)</code> grammar, we can perform predictive top-down parsing by selecting the right production rule by examining the leading input symbol.</p>
<p>In general, there are two kinds of conflicts found in grammar that violates the <code>LL(1)</code> grammar requirements.</p>
<ol>
<li>first-first conflict</li>
<li>first-follow conflict</li>
</ol>
<h5 id="first-first-conflict">First-first Conflict<a class="headerlink" href="#first-first-conflict" title="Permanent link">¶</a></h5>
<p>Consider the grammar</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1">1</a></span>
<span class="normal"><a href="#__codelineno-22-2">2</a></span>
<span class="normal"><a href="#__codelineno-22-3">3</a></span>
<span class="normal"><a href="#__codelineno-22-4">4</a></span>
<span class="normal"><a href="#__codelineno-22-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1"></a>&lt;&lt;Grammar 9&gt;&gt;
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2"></a>S ::= Xb
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3"></a>S ::= Yc
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4"></a>X ::= a
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5"></a>Y ::= a 
</span></code></pre></div></td></tr></table></div>
<p>We compute <span class="arithmatex">\(null\)</span>, <span class="arithmatex">\(first\)</span> and <span class="arithmatex">\(follow\)</span>.</p>
<div class="arithmatex">\[
\begin{array}{l}
null(S) = null(Xb) = false \\
null(X) = null(a) = false \\
null(Y) = null(a) = false \\
\\
first(S) = first(Xb) \cup first(Yc) = \{a\} \\
first(X) = first(a) = \{a \} \\
first(Y) = first(a) = \{a \} \\
\\
follow(S) = \{\} \\
follow(X) = \{b \} \\
follow(Y) = \{c \}
\end{array}
\]</div>
<p>We fill up the following predictive parsing table</p>
<table>
<thead>
<tr>
<th></th>
<th>a</th>
<th>b</th>
<th>c</th>
</tr>
</thead>
<tbody>
<tr>
<td>S</td>
<td>S::=Xb, S::=Yc</td>
<td></td>
<td></td>
</tr>
<tr>
<td>X</td>
<td>X::=a</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Y</td>
<td>Y::=a</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>From the above we find that there are two production rules in the cell <code>(S,a)</code>, namely <code>S::=Xb</code>, and <code>S::=Yc</code>.
This is a first-first conflict, since both production rules' first set contains <code>a</code>. This prevents us from constructing a predictable parser by observing the leading symbol from the input.</p>
<p>First-first conflict can be eliminated by applying <em>left-factoring</em> (not to be confused with left recursion).</p>
<p>From our running example, we find that the cell <code>(S,a)</code> has more than one production rule applicable. This is caused by the fact that both <code>X::=a</code> and <code>Y::=a</code> start with the non-terminal <code>a</code>. We could apply substitution to eliminate <code>X</code> and <code>Y</code>.</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1">1</a></span>
<span class="normal"><a href="#__codelineno-23-2">2</a></span>
<span class="normal"><a href="#__codelineno-23-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1"></a>&lt;&lt;Grammar 10&gt;&gt;
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2"></a>S ::= ab
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3"></a>S ::= ac
</span></code></pre></div></td></tr></table></div>
<p>Then we could introduce a new non-terminal <code>Z</code> which capture the following languages after <code>a</code>.</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1">1</a></span>
<span class="normal"><a href="#__codelineno-24-2">2</a></span>
<span class="normal"><a href="#__codelineno-24-3">3</a></span>
<span class="normal"><a href="#__codelineno-24-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1"></a>&lt;&lt;Grammar 11&gt;&gt;
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2"></a>S ::= aZ
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3"></a>Z ::= b
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4"></a>Z ::= c
</span></code></pre></div></td></tr></table></div>
<h5 id="first-follow-conflict">First-Follow Conflict<a class="headerlink" href="#first-follow-conflict" title="Permanent link">¶</a></h5>
<p>Consider the following grammar</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1">1</a></span>
<span class="normal"><a href="#__codelineno-25-2">2</a></span>
<span class="normal"><a href="#__codelineno-25-3">3</a></span>
<span class="normal"><a href="#__codelineno-25-4">4</a></span>
<span class="normal"><a href="#__codelineno-25-5">5</a></span>
<span class="normal"><a href="#__codelineno-25-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1"></a>&lt;&lt;Grammar 12&gt;&gt;
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2"></a>S ::= Xd 
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3"></a>X ::= C 
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4"></a>X ::= Ba
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5"></a>C ::= epsilon
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6"></a>B ::= d
</span></code></pre></div></td></tr></table></div>
<p>and the <span class="arithmatex">\(null\)</span>, <span class="arithmatex">\(first\)</span> and <span class="arithmatex">\(follow\)</span> functions</p>
<div class="arithmatex">\[
\begin{array}{l}
null(S) = null(Xd) = null(X) \wedge null(d) = false \\
null(X) = null(C) \vee null(Ba) = true \\
null(C) = null(\epsilon) = true \\
null(B) = null(d) = false \\
\\
first(S) = first(Xd) = first(X) \cup first(d) = \{d\} \\
first(X) = first(C) \cup first(Ba) = \{d\} \\
first(C) = \{\}\\
first(B) = \{d\} \\
\\
follow(S) = \{\} \\
follow(X) = \{d\} \\
follow(C) = follow(X) = \{d\} \\
follow(B) = \{d\}
\end{array}
\]</div>
<p>We construct the predictive parsing table as follows</p>
<table>
<thead>
<tr>
<th></th>
<th>a</th>
<th>d</th>
</tr>
</thead>
<tbody>
<tr>
<td>S</td>
<td></td>
<td>S::=Xd</td>
</tr>
<tr>
<td>X</td>
<td></td>
<td>X::=Ba, X::=C(S::=Xd)</td>
</tr>
<tr>
<td>C</td>
<td></td>
<td>C::=epsilon (S::=Xd)</td>
</tr>
<tr>
<td>B</td>
<td></td>
<td>B::=d</td>
</tr>
</tbody>
</table>
<p>In the cell of <code>(X,d)</code> we find two production rules <code>X::=Ba</code> and <code>X::=C (S::=Xd)</code>.
It is a first-follow conflict, because the first production rule is discovered through the <code>first(X)</code> set and the second one is from the <code>follow(X)</code> set.</p>
<p>Since first-follow conflicts are introduced by epsilon production rule, we could apply substitution to eliminate first-follow conflicts</p>
<p>Substitute <code>B</code> and <code>C</code></p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1">1</a></span>
<span class="normal"><a href="#__codelineno-26-2">2</a></span>
<span class="normal"><a href="#__codelineno-26-3">3</a></span>
<span class="normal"><a href="#__codelineno-26-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1"></a>&lt;&lt;Grammar 13&gt;&gt;
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2"></a>S ::= Xd 
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3"></a>X ::= epsilon 
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4"></a>X ::= da
</span></code></pre></div></td></tr></table></div>
<p>Substitute <code>X</code></p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1">1</a></span>
<span class="normal"><a href="#__codelineno-27-2">2</a></span>
<span class="normal"><a href="#__codelineno-27-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1"></a>&lt;&lt;Grammar 14&gt;&gt;
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2"></a>S ::= d
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3"></a>S ::= dad
</span></code></pre></div></td></tr></table></div>
<p>However, as we can observe, eliminating first-follow conflict by substitution might introduce a new first-first conflict.</p>
<h4 id="to-ll1-or-not-ll1">To <code>LL(1)</code> or not <code>LL(1)</code><a class="headerlink" href="#to-ll1-or-not-ll1" title="Permanent link">¶</a></h4>
<p>Given a grammar, we could get a <code>LL(1)</code> grammar equivalent in most of the cases.</p>
<ol>
<li>Disambiguate the grammar if it is ambiguous</li>
<li>Eliminate the left recursion</li>
<li>Apply left-factoring if there exists some first-first conflict</li>
<li>Apply substitution if there exists some first-follow conflict</li>
<li>repeat 3 if first-first conflict is introduced</li>
</ol>
<p>Step 1 is often done manually, (there is no general algorithm to do so.)
Steps 2-4 (and 5) can be automated by some algorithm.</p>
<p>Let's consider another example (a subset of Grammar 3).</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1">1</a></span>
<span class="normal"><a href="#__codelineno-28-2">2</a></span>
<span class="normal"><a href="#__codelineno-28-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1"></a>&lt;&lt;Grammar 15&gt;&gt;
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2"></a>E ::= E + E
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3"></a>E ::= i
</span></code></pre></div></td></tr></table></div>
<p>Note that this grammar is ambiguous. Let's suppose we skip this step and
directly eliminate the left-recursion</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1">1</a></span>
<span class="normal"><a href="#__codelineno-29-2">2</a></span>
<span class="normal"><a href="#__codelineno-29-3">3</a></span>
<span class="normal"><a href="#__codelineno-29-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1"></a>&lt;&lt;Grammar 16&gt;&gt;
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2"></a>E ::= iE'
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3"></a>E' ::= + EE'
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4"></a>E' ::= epsilon
</span></code></pre></div></td></tr></table></div>
<p>Next we compute the predictive parsing table.</p>
<div class="arithmatex">\[
\begin{array}{l}
null(E) = null(iE) = null(i) \wedge null(E') = false \wedge null(E') = false \\
null(E') = null(+EE') \vee null(\epsilon) = null(+E') \vee true = true \\
\\
first(E) = first(iE') = \{i\} \\
first(E') = first(+EE') \cup first(\epsilon) = first(+EE') = \{+\} \\
\\
follow(E) = first(E') \cup follow(E') = \{+\} \cup follow(E') \\
follow(E') = follow(E) \cup follow(E') = \{+\} \cup follow(E') \cup follow(E')
\end{array}
\]</div>
<table>
<thead>
<tr>
<th></th>
<th>i</th>
<th>+</th>
</tr>
</thead>
<tbody>
<tr>
<td>E</td>
<td>E::= iE'</td>
<td></td>
</tr>
<tr>
<td>E'</td>
<td></td>
<td>E'::= +EE', E'::= epsilon</td>
</tr>
</tbody>
</table>
<p>As shown from the above, at a glance, we argue that one of the 
cell contains two production rules. We might argue that the grammar contains a first-follow conflict. 
However, this grammar is LL(1), because when we are checking for 
first-follow conflicts, with <code>E'::= epsilon</code> rule, we need to look up what is the <span class="arithmatex">\(Follow\)</span> set of <code>E'</code>. In this case, it is <code>+</code>, and there is only one production rule in the grammar starting with <code>+</code>, which is 
<code>E' ::= +EE'</code>. Hence there is no conflict in this grammar. </p>
<h4 id="a-short-summary-so-far-for-top-down-recursive-parsing">A short summary so far for top-down recursive parsing<a class="headerlink" href="#a-short-summary-so-far-for-top-down-recursive-parsing" title="Permanent link">¶</a></h4>
<p>Top-down parsing is simple, however might be inefficient.</p>
<p>We need to rewrite the grammar into a more specific (a subset) if the grammar is ambiguous. No general algorithm exists.</p>
<p>We need to eliminate left recursion so that the parsing will terminate.</p>
<p>We construct the predictive parsing table to check whether the grammar is in <code>LL(k)</code>. If the grammar is in
<code>LL(k)</code> we can always pick the right production rule given the first <code>k</code> leading symbols from the input.</p>
<p>For most of the cases, <code>LL(1)</code> is sufficient for practical use.</p>
<p>We also can conclude that a <code>LL(k+1)</code> grammar is also a <code>LL(k)</code> grammar, but the other way does not hold.</p>
<p>Given a particular <code>k</code> and a grammar <code>G</code>, we can check whether <code>G</code> is <code>LL(k)</code>. However given a
grammar <code>G</code> to find a <code>k</code> such that <code>G</code> is <code>LL(k)</code> is undecidable.</p>
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">¶</a></h2>
<p>We have covered</p>
<ul>
<li>The roles and functionalities of lexers and parsers in a compiler pipeline</li>
<li>There are two major types of parser, top-down parsing and bottom-up parsing</li>
<li>How to eliminate left-recursion from a grammar,</li>
<li>How to apply left-factoring</li>
<li>How to construct a <code>LL(1)</code> predictive parsing table</li>
</ul>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": ["content.code.annotate", "content.code.copy", "navigation.expand", "navigation.indexes", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../assets/javascripts/bundle.1e8ae164.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script type="module">import mermaid from "https://unpkg.com/mermaid@10.4.0/dist/mermaid.esm.min.mjs";
mermaid.initialize({});</script></body>
</html>